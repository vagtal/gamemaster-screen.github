import{r as z,R as y,j as Z}from"./index-B5q0XL7m.js";import{O as de,a5 as he,$ as fe,a3 as te,aj as me,Y as Q,S as J,Z as F,bs as ge,b as ke}from"./FirebaseUtils-DPMbTUBM.js";var R=10,X=function(n,t,r,i){var o=(i-90)*Math.PI/180;return{x:n+r*Math.cos(o),y:t+r*Math.sin(o)}},N=function(n,t,r,i,o){var l=o;o>i&&o-i>=360&&(l=i+359.99);var s=X(n,t,r,l),a=X(n,t,r,i),h=l-i<=180?"0":"1",g=["M",s.x.toFixed(R),s.y.toFixed(R),"A",r.toFixed(R),r.toFixed(R),0,h,0,a.x.toFixed(R),a.y.toFixed(R)].join(" ");return g},pe=function(n,t,r){return Math.max(0,n+t*r)%360},be=te(["border-radius:",";"],function(e){return e.theme.global.edgeSize[e.round.size]}),ne=de.svg.withConfig(he).attrs(fe).withConfig({displayName:"StyledMeter",componentId:"sc-nsxarx-0"})(["max-width:100%;overflow:hidden;"," "," "," path{transition:stroke 0.3s,stroke-width 0.3s;}",";"],function(e){return e.reverse&&te(["transform:scale(-1,1);"])},me,function(e){return e.round&&be},function(e){return e.theme.meter&&e.theme.meter.extend}),W=function(n,t){var r={};return n&&(typeof n=="object"?(r.stroke=Q(n.color,t),n.opacity&&(r.strokeOpacity=""+(n.opacity===!0?t.global.opacity.medium:t.global.opacity[n.opacity]||n.opacity))):r.stroke=Q(n,t)),r},xe=/^neutral-\d+/,ae=function(n,t,r){if(n===r-1&&t.meter.color)return t.meter.color;var i=r-n-1;if(t.meter&&t.meter.colors){var o=t.meter.colors[t.dark?"dark":"light"]||t.meter.colors;return o[i%o.length]}var l=Object.keys(t.global.colors).filter(function(a){return a.match(/^graph-[0-9]$/)});if(l.length>0)return l[i%l.length];var s=Object.keys(t.global.colors).filter(function(a){return xe.test(a)});return s[i%s.length]},ye=["background","max","round","size","thickness","direction","values","reverse"],Me=["color","highlight","label","onHover","value"];function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_.apply(null,arguments)}function A(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}var oe=z.forwardRef(function(e,n){var t=e.background,r=t===void 0?"light-1":t,i=e.max,o=e.round,l=e.size,s=e.thickness,a=e.direction,h=e.values,g=e.reverse,k=A(e,ye),u=J(),c=l==="full"?288:F(u.global.size[l]||l),v=F(u.global.edgeSize[s]||s),d=o?v/2:0,p=v/2,O=(h||[]).some(function(L){return L.highlight}),f=a==="horizontal"?d:i*(c-2*d)/i,j=(h||[]).reduce(function(L,x,C){if(x.value>0){var D=x.color,I=x.highlight;x.label;var m=x.onHover,B=x.value,V=A(x,Me),G="p-"+C,P=B*(c-2*d)/i,S=a==="horizontal"?"M "+f+","+p+" L "+(f+P)+","+p:"M "+p+","+f+" L "+p+","+(f-P),T=D||ae(C,u,h?h.length:0),$;m&&($={onMouseOver:function(){return m(!0)},onMouseLeave:function(){return m(!1)}}),a==="horizontal"?f+=P:f-=P;var U=y.createElement("path",_({key:G,d:S,fill:"none"},W(O&&!I?r:T,u),{strokeWidth:a==="horizontal"?v:c,strokeLinecap:o?"round":"butt"},$,V));L.push(U)}return L},[]).reverse(),w;a==="horizontal"?w=l==="full"?"100%":c:w=l==="full"?"100%":v;var b=a==="horizontal"?"M "+d+","+p+" L "+(c-d)+","+p:"M "+p+","+d+" L "+p+","+(c-d);return y.createElement(ne,_({ref:n,viewBox:a==="horizontal"?"0 0 "+c+" "+v:"0 0 "+v+" "+c,preserveAspectRatio:"none",width:w,height:a==="horizontal"?v:c,round:o?{size:s}:void 0},k,{reverse:g}),y.createElement("path",_({d:b,fill:"none"},W(r,u),{strokeWidth:v,strokeLinecap:o?"round":"square"})),j)});oe.displayName="Bar";var ze=["background","max","round","size","thickness","type","values"],we=["color","highlight","label","onHover","value"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},E.apply(null,arguments)}function ee(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}var ie=z.forwardRef(function(e,n){var t=e.background,r=e.max,i=e.round,o=e.size,l=e.thickness,s=e.type,a=e.values,h=ee(e,ze),g=J(),k=o==="full"?288:F(g.global.size[o]||o),u=s==="pie"?k/2:F(g.global.edgeSize[l]||l),c=k/2,v=k/2,d=k/2-u/2,p=Math.max(5,Math.ceil(Math.log10(r))+3),O=Math.pow(10,p),f=Math.floor((s==="semicircle"?180:360)/r*O)/O,j=(a||[]).some(function(m){return m.highlight}),w=0,b=s==="semicircle"?270:0,L=[],x=[];(a||[]).filter(function(m){return m.value>0}).forEach(function(m,B){var V=m.color,G=m.highlight;m.label;var P=m.onHover,S=m.value,T=ee(m,we),$="p-"+B,U=V||ae(B,g,a?a.length:0),M;w+S>=r?M=s==="semicircle"?90:360:M=pe(b,f,S);var H;P&&(H={onMouseOver:function(){return P(!0)},onMouseLeave:function(){return P(!1)}});var Y=W(j&&!G?t:U,g);if(i){var se=N(c,v,d,b,M);L.unshift(y.createElement("path",E({key:$,d:se,fill:"none"},Y,{strokeWidth:u,strokeLinecap:"round"},H,T)));var le=N(c,v,d,M-.5,M),ue=y.createElement("path",E({key:$+"-",d:le,fill:"none"},Y,{strokeWidth:u,strokeLinecap:"round"},H,T));M-b>2*f&&(x=[]),x.unshift(ue)}else{var ce=N(c,v,d,b,M);L.push(y.createElement("path",E({key:$,d:ce,fill:"none"},Y,{strokeWidth:u,strokeLinecap:"butt"},H,T)))}w+=S,b=M});var C;if(s==="semicircle"){var D=N(c,v,d,270,90);C=y.createElement("path",E({d:D,strokeWidth:u,fill:"none"},W(t,g),{strokeLinecap:i?"round":"square"}))}else C=y.createElement("circle",E({cx:c,cy:v,r:d},W(t,g),{strokeWidth:u,strokeLinecap:i?"round":"square",fill:"none"}));var I=s==="semicircle"?k/2:k;return y.createElement(ne,E({ref:n,viewBox:"0 0 "+k+" "+I,width:o==="full"?"100%":k,height:o==="full"?"100%":I},h),C,L,x)});ie.displayName="Circle";var Le={},Pe=Le,Ee=["background","color","direction","size","thickness","type","reverse","value","values"];function q(){return q=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},q.apply(null,arguments)}function Oe(e,n){if(e==null)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.includes(r))continue;t[r]=e[r]}return t}var je=function(n){var t=100;return n&&n.length>1&&(t=0,n.forEach(function(r){t+=r.value})),t},K=z.forwardRef(function(e,n){var t=e.background,r=t===void 0?{color:"light-2",opacity:"medium"}:t,i=e.color,o=e.direction,l=o===void 0?"horizontal":o,s=e.size,a=s===void 0?"medium":s,h=e.thickness,g=h===void 0?"medium":h,k=e.type,u=k===void 0?"bar":k,c=e.reverse,v=e.value,d=e.values,p=Oe(e,Ee),O=J(),f=z.useMemo(function(){return d||(v?[{color:i,value:v}]:[])},[i,v,d]),j=l==="horizontal"&&(O.dir==="rtl"||c)&&!(O.dir==="rtl"&&c),w=z.useMemo(function(){return je(f)},[f]),b;return u==="bar"?b=y.createElement(oe,q({ref:n,max:w,values:f,size:a,thickness:g,background:r,direction:l,reverse:j},p)):(u==="circle"||u==="pie"||u==="semicircle")&&(b=y.createElement(ie,q({ref:n,max:w,values:f,size:a,thickness:g,type:u,background:r,reverse:j},p))),b});K.displayName="Meter";K.prototype=Pe;const re=20;function Re(e){const{onLongPress:n,...t}=e,r=e.timeout||1e3,[i,o]=z.useState(0),l=z.useRef(i);l.current=i;const s=z.useRef(),a=z.useCallback(()=>{s.current&&(clearInterval(s.current),s.current=void 0),o(0)},[s,o]),h=z.useCallback(()=>{s.current||(s.current=setInterval(()=>{l.current>r?(o(0),a(),n()):o(l.current+re)},re))},[n,r,a]);return Z.jsxs(ge,{anchor:"center",margin:e.shortHeight?{vertical:"-30px"}:void 0,children:[Z.jsx(K,{type:"circle",max:r,values:[{value:i,color:"status-warning"}],size:"40px",thickness:"xsmall",margin:{top:"3px",bottom:"-3px"},background:"transparent"}),Z.jsx(ke,{...t,onMouseDown:h,onMouseUp:a,onMouseLeave:a,onTouchStart:h,onTouchEnd:a,onTouchCancel:a})]})}export{Re as L};
