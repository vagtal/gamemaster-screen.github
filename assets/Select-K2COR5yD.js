import{r as i,R as u,W as a}from"./index-B5q0XL7m.js";import{O as X,bu as rt,$ as xe,bv as at,a5 as Ye,B as N,bw as ot,b as Ge,bx as lt,by as De,T as Je,Y as it,N as Re,S as Qe,bz as oe,bf as st,ac as Xe,br as ct,bA as ut,a$ as dt,ak as ft,bj as pt}from"./FirebaseUtils-DPMbTUBM.js";var mt=X(N).attrs(xe).withConfig({displayName:"StyledSelect__StyledContainer",componentId:"sc-znp66n-0"})(["@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){width:100%;}",";",";"],function(e){return e.dropHeight?ot("max-height",e.dropHeight,e.theme):"max-height: inherit;"},function(e){return e.theme.select.container&&e.theme.select.container.extend}),vt=X.div.withConfig(Ye).withConfig({displayName:"StyledSelect__OptionsContainer",componentId:"sc-znp66n-1"})(["position:relative;scroll-behavior:smooth;overflow:auto;outline:none;"]),ht=X.input.withConfig(Ye).withConfig({displayName:"StyledSelect__HiddenInput",componentId:"sc-znp66n-2"})(["display:none;"]),gt=X(Ge).attrs(xe).withConfig({displayName:"StyledSelect__SelectOption",componentId:"sc-znp66n-3"})([""," "," &:focus{","}display:block;width:100%;",";"],function(e){return e.selected&&e.textComponent&&lt},function(e){return e.active&&De(!e.children&&!e.theme.select.options?void 0:"background",e.theme)},function(e){return e.active&&De(!e.children&&!e.theme.select.options?void 0:"background",e.theme)},function(e){return e["aria-disabled"]&&"cursor: default"}),yt=X(Je).withConfig({displayName:"StyledSelect__SelectTextInput",componentId:"sc-znp66n-4"})(["cursor:",";"],function(e){return e.defaultCursor?"default":"pointer"}),bt=X(rt).attrs(xe).withConfig({displayName:"StyledSelect__StyledSelectDropButton",componentId:"sc-znp66n-5"})(["",";",";",";"],function(e){return!e.plainSelect&&at},function(e){var t;return(t=e.theme.select)==null||(t=t.control)==null?void 0:t.extend},function(e){var t;return e.open&&((t=e.theme.select)==null||(t=t.control)==null?void 0:t.open)}),O=function(t,n){if(t!=null)return typeof n=="object"?O(t,n.key):typeof n=="function"?n(t):n!==void 0&&typeof t=="object"?t[n]:typeof t=="object"&&Object.keys(t)?t[Object.keys(t)[0]]:t},We=function(t,n,r){return O(n[t],r)},Ze=function(t,n,r){return O(n[t],r)},qe=function(t,n,r){if(t)return typeof n=="object"?t.findIndex(function(d){return O(d,r)===O(n,r)}):t.indexOf(n)},St=function(t,n,r,d){return i.useCallback(function(g){var E=r[g],y;if(n)y=O(E,n);else if(Array.isArray(t))if(typeof t[0]=="number")y=t.indexOf(g)!==-1;else{var I=Ze(g,r,d);y=qe(t,r[g],d)!==-1||qe(t,I,d)!==-1}return y},[t,n,r,d])},Ot=function(t,n){return Array.isArray(t)?t.map(function(r){return n&&n.reduce?r:O(r,n)}):n&&n.reduce?t:O(t,n)},Ct=function(t,n){var r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;r.call(t.current,n);var d=new Event("input",{bubbles:!0});t.current.dispatchEvent(d)},wt=function(t,n,r){var d;switch(t){case!1:break;case!0:case void 0:d=r&&n.select.icons.up?n.select.icons.up:n.select.icons.down;break;default:d=t}return d},Tt=function(t,n,r,d){var g=O(n[r[0]],t);if(!d&&r.length===1&&typeof g=="object")return g},xt=function(t){return it(t.select.icons.color||"control",t)};function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(null,arguments)}var Et=function(t){var n,r,d,g=t.emptySearchMessage,E=t.selectOptionsStyle,y=t.theme;return u.createElement(N,(y==null||(n=y.select)==null||(n=n.emptySearchMessage)==null?void 0:n.container)||E,u.createElement(Re,$e({"aria-live":"polite",role:"alert"},(y==null||(r=y.select)==null||(r=r.emptySearchMessage)==null?void 0:r.text)||((d=y.select)==null||(d=d.options)==null?void 0:d.text)),g))},It=["clear","onClear","name","theme"];function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(null,arguments)}function Mt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Pt=X(Ge).attrs(xe).withConfig({displayName:"SelectContainer__StyledButton",componentId:"sc-1wi0ul8-0"})(["&:focus{","}"],function(e){return De("background",e.theme)}),Ue=i.forwardRef(function(e,t){var n=e.clear,r=e.onClear,d=e.name,g=e.theme,E=Mt(e,It),y=n.label,I=n.position,Z=I!=="bottom"?"start":"center",V=y||"Clear "+(d||"selection");return u.createElement(Pt,ge({a11yTitle:V+". Or, press "+(I==="bottom"?"shift tab":"down arrow")+" to move to select options",fill:"horizontal",ref:t,onClick:r,focusIndicator:!1},E),u.createElement(N,ge({},g.select.clear.container,{align:Z}),u.createElement(Re,g.select.clear.text,V)))}),kt=i.forwardRef(function(e,t){var n=e.clear,r=e.children,d=r===void 0?null:r,g=e.disabled,E=e.disabledKey,y=e.dropHeight,I=e.emptySearchMessage,Z=I===void 0?"No matches found":I,V=e.id,k=e.labelKey,H=e.multiple,le=e.name,K=e.onChange,ie=e.onKeyDown,Ee=e.onMore,A=e.onSearch,se=e.optionIndexesInValue,f=e.options,_=e.allOptions,W=e.searchPlaceholder,Ie=e.search,ye=e.setSearch,ce=e.selected,z=e.usingKeyboard,ee=e.value,v=ee===void 0?"":ee,p=e.valueKey,te=e.replace,Me=te===void 0?!0:te,C=Qe(),M=i.useCallback(function(l){var o=!!(H&&v?v.length:v),c=l==="bottom"?(n==null?void 0:n.position)==="bottom":(n==null?void 0:n.position)!=="bottom";return n&&o&&c},[n,H,v]),D=St(g,E,f,p||k),be=i.useState(z&&!M("top")&&!A?0:-1),h=be[0],w=be[1],ne=i.useState(z),q=ne[0],U=ne[1],ue=i.useRef(),Se=i.useRef(),Y=i.useRef(),x=i.useRef();i.useEffect(function(){var l;h>=0&&((l=x.current)==null||l.focus())},[h]),i.useEffect(function(){var l=setTimeout(function(){var o=Se.current,c=Y.current;if(A){var s=ue.current;s&&s.focus&&!x.current&&oe(s)}else n&&c&&c.focus&&n.position!=="bottom"?oe(c):z&&x.current?oe(x.current):o&&oe(o)},100);return function(){return clearTimeout(l)}},[A,z,n]);var Oe=i.useCallback(function(l){var o;if(ce)o=ce.indexOf(l)!==-1;else{var c=Ze(l,f,p);if(Array.isArray(v))v.length===0?o=!1:typeof v[0]!="object"?o=v.indexOf(c)!==-1:p&&(o=v.some(function(m){var T=typeof p=="function"?p(m):m[p]||m[p.key];return T===c}));else if(p&&v!==null&&typeof v=="object"){var s=typeof p=="function"?p(v):v[p];o=s===c}else o=v===c}return o},[ce,v,p,f]),de=i.useCallback(function(l){return function(o){if(K){var c,s;if(H){var m=se.slice(0),T=_.indexOf(f[l]),b=se.indexOf(T);b===-1?m.push(T):m.splice(b,1),c=m.map(function(P){return p&&p.reduce?O(_[P],p):_[P]}),s=m}else c=p&&p.reduce?O(f[l],p):f[l],s=l;K(o,{option:f[l],value:c,selected:s})}}},[H,K,se,f,_,p]),fe=i.useCallback(function(l){K(l,{option:void 0,value:"",selected:""})},[K]),G=i.useCallback(function(l){l.preventDefault();for(var o=h+1;o<f.length&&D(o);)o+=1;o!==f.length&&(w(o),U(!0))},[h,f,D]),Pe=i.useCallback(function(l){l.preventDefault();var o=h-1;if(o===-1){var c=ue.current,s=Y.current;s&&s.focus&&M("top")?(w(o),oe(s)):c&&c.focus&&(w(o),oe(c))}for(;o>=0&&D(o);)o-=1;o>=0&&(w(o),U(!0))},[h,D,M]),L=i.useCallback(function(l){if(!A){var o=f.findIndex(function(c,s){var m;return typeof c=="object"?m=c.label||O(c,k):m=c,typeof m=="string"&&m.charAt(0).toLowerCase()===l.key.toLowerCase()&&!D(s)});o>=0&&(l.preventDefault(),w(o),U(!0))}ie&&ie(l)},[D,k,ie,f,A]),R=i.useCallback(function(l){return function(){q||w(l)}},[q]),Ce=i.useCallback(function(l){(M("bottom")||M("top"))&&st(Y.current)?K(l,{option:void 0,value:"",selected:""}):h>=0&&h<f.length&&(l.preventDefault(),de(h)(l))},[h,de,f,K,M]),pe=C.select.searchInput,me=pe||Je,$=C.select.options?ge({},C.select.options.box,C.select.options.container):{};return u.createElement(Xe,{onEnter:Ce,onSpace:Ce,onUp:Pe,onDown:G,onKeyDown:L},u.createElement(mt,{ref:t,id:V?V+"__select-drop":void 0,dropHeight:y},A&&u.createElement(N,{pad:pe?void 0:"xsmall",flex:!1},u.createElement(me,{focusIndicator:!pe,size:"small",ref:ue,type:"search",value:Ie||"",placeholder:W,onChange:function(o){var c=o.target.value;ye(c),w(-1),A(c)}})),M("top")&&u.createElement(Ue,{ref:Y,clear:n,name:le,onClear:fe,onFocus:function(){return w(-1)},onMouseOver:function(){return w(-1)},theme:C}),f.length>0?u.createElement(vt,{role:"listbox",tabIndex:"-1",ref:Se,"aria-multiselectable":H,onMouseMove:function(){return U(!1)}},u.createElement(ct,{items:f,step:C.select.step,onMore:Ee,replace:Me,show:h!==-1?h:void 0},function(l,o,c){var s=D(o),m=Oe(o),T=h===o,b,P=!1;return d?(b=d(l,o,f,{active:T,disabled:s,selected:m}),(typeof b=="string"||b.props&&b.props.children&&typeof b.props.children=="string")&&(P=!0)):C.select.options&&(b=u.createElement(N,$,u.createElement(Re,C.select.options.text,We(o,f,k))),P=!0),u.createElement(gt,{key:o,ref:function(ve){c&&(c.current=ve),T&&(x.current=ve)},tabIndex:m?"0":"-1",role:"option","aria-setsize":f.length,"aria-posinset":o+1,"aria-selected":m,focusIndicator:!1,"aria-disabled":s||void 0,plain:b?!0:void 0,align:"start",kind:b?void 0:"option",label:b?void 0:We(o,f,k||p),disabled:s||void 0,active:T,selected:m,onFocus:function(){return w(o)},onMouseOver:s?void 0:R(o),onClick:s?void 0:de(o),textComponent:P},b)})):u.createElement(Et,{emptySearchMessage:Z,selectOptionsStyle:$,theme:C}),M("bottom")&&u.createElement(Ue,{ref:Y,clear:n,name:le,onClear:fe,onFocus:function(){return w(-1)},onMouseOver:function(){return w(-1)},theme:C})))}),Kt=["disabled","id"];function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(null,arguments)}function At(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Dt=i.forwardRef(function(e,t){var n=e.disabled,r=e.id,d=At(e,Kt);return u.createElement(yt,je({defaultCursor:n===!0||void 0,focusIndicator:!1,id:r?r+"__input":void 0,ref:t},d,{tabIndex:"-1",type:"text",plain:!0,readOnly:!0}))});function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(null,arguments)}ze({},ut,{children:a.func,disabled:a.oneOfType([a.bool,a.arrayOf(a.oneOfType([a.number,a.string,a.object]))]),disabledKey:a.oneOfType([a.string,a.func]),dropAlign:a.shape({top:a.oneOf(["top","bottom"]),bottom:a.oneOf(["top","bottom"]),right:a.oneOf(["left","right"]),left:a.oneOf(["left","right"])}),dropHeight:a.oneOfType([a.oneOf(["xsmall","small","medium","large","xlarge"]),a.string]),dropTarget:a.object,dropProps:a.object,emptySearchMessage:a.oneOfType([a.string,a.node]),focusIndicator:a.bool,icon:a.oneOfType([a.bool,a.func,a.node,a.elementType]),labelKey:a.oneOfType([a.string,a.func]),messages:a.shape({multiple:a.string}),name:a.string,onChange:a.func,onClose:a.func,onOpen:a.func,onSearch:a.func,onMore:a.func,options:a.arrayOf(a.oneOfType([a.string,a.number,a.bool,a.element,a.object])).isRequired,open:a.bool,placeholder:a.oneOfType([a.string,a.element,a.node]),plain:a.bool,replace:a.bool,searchPlaceholder:a.oneOfType([a.string,a.element,a.node]),size:a.oneOfType([a.oneOf(["small","medium","large","xlarge"]),a.string]),valueLabel:a.oneOfType([a.node,a.func]),valueKey:a.oneOfType([a.string,a.func,a.shape({key:a.string,reduce:a.bool})])});var $t={},jt=$t,zt=["a11yTitle","aria-label","alignSelf","children","clear","closeOnChange","defaultValue","disabled","disabledKey","dropAlign","dropHeight","dropProps","dropTarget","emptySearchMessage","focusIndicator","gridArea","id","icon","labelKey","margin","messages","multiple","name","onBlur","onChange","onClick","onClose","onFocus","onKeyDown","onMore","onOpen","onSearch","open","options","placeholder","plain","replace","searchPlaceholder","selected","size","value","valueKey","valueLabel"];function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Le.apply(null,arguments)}function Lt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Rt={top:"bottom",left:"left"},_e=i.forwardRef(function(e,t){var n=e.a11yTitle,r=e["aria-label"],d=e.alignSelf,g=e.children,E=e.clear,y=E===void 0?!1:E,I=e.closeOnChange,Z=I===void 0?!0:I,V=e.defaultValue,k=e.disabled,H=e.disabledKey,le=e.dropAlign,K=le===void 0?Rt:le,ie=e.dropHeight,Ee=e.dropProps,A=e.dropTarget,se=e.emptySearchMessage,f=e.focusIndicator,_=e.gridArea,W=e.id,Ie=e.icon,ye=e.labelKey,ce=e.margin,z=e.messages,ee=e.multiple,v=e.name,p=e.onBlur,te=e.onChange,Me=e.onClick,C=e.onClose,M=e.onFocus,D=e.onKeyDown,be=e.onMore,h=e.onOpen,w=e.onSearch,ne=e.open,q=e.options,U=e.placeholder,ue=e.plain,Se=e.replace,Y=e.searchPlaceholder,x=e.selected,Oe=e.size,de=e.value,fe=e.valueKey,G=e.valueLabel,Pe=Lt(e,zt),L=Qe(),R=i.useRef(),Ce=i.useContext(dt),pe=i.useContext(ft),me=pe.format,$=fe||ye,l=ye||fe,o=pt(),c=Ce.useFormInput({name:v,value:de,initialValue:V||""}),s=c[0],m=c[1],T=i.useMemo(function(){return Ot(s,$)},[s,$]),b=i.useState(),P=b[0],we=b[1],ve=i.useState(q),J=ve[0],et=ve[1];i.useEffect(function(){P||et(q)},[q,P]);var Q=i.useMemo(function(){var S=[];return J.forEach(function(ae,j){x!==void 0?Array.isArray(x)?x.indexOf(j)!==-1&&S.push(j):j===x&&S.push(j):Array.isArray(T)?T.some(function(F){return F===O(ae,$)})&&S.push(j):T===O(ae,$)&&S.push(j)}),S},[J,x,$,T]),Fe=i.useState(ne),he=Fe[0],ke=Fe[1];i.useEffect(function(){return ke(ne)},[ne]);var Ke=i.useCallback(function(){he||(ke(!0),h&&h())},[h,he]),Ae=i.useCallback(function(){ke(!1),C&&C(),we()},[C]),Be=i.useCallback(function(S){return Ct(R,S)},[]),tt=i.useCallback(function(S,ae){var j=ae.option,F=ae.value,He=ae.selected;if(Z&&Ae(),(typeof F!="object"||ee)&&F!==S.target.value&&R.current&&Be(F),m(F),te){S.persist();var B;S instanceof Event?(B=new S.constructor(S.type,S),Object.defineProperties(B,{target:{value:R.current},value:{value:F},option:{value:j},selected:{value:He}})):(B=S,B.target=R.current,B.value=F,B.option=j,B.selected=He),te(B)}},[Z,ee,te,Ae,m,Be]),Te=wt(Ie,L,he),re=i.useMemo(function(){if(G instanceof Function){if(s||s===0||s===!1)return G(s)}else{if(G)return G;if(u.isValidElement(s))return s}},[s,G]),Ne=i.useMemo(function(){return Tt(l,J,Q,re)},[l,J,Q,re]),Ve=i.useMemo(function(){if(!re)return Q.length===0?"":Q.length===1?O(J[Q[0]],l):me({id:"select.multiple",messages:z})},[l,z,me,Q,J,re]),nt=xt(L);return u.createElement(Xe,{onDown:Ke,onUp:Ke},u.createElement(bt,{ref:t,a11yTitle:""+(r||n||U||"Open Drop")+(s?me({id:"select.selected",messages:z,values:{currentSelectedValue:s}}):""),"aria-expanded":!!he,"aria-haspopup":"listbox",id:W,disabled:k===!0||void 0,dropAlign:K,dropTarget:A,open:he,alignSelf:d,focusIndicator:f,onFocus:M,onBlur:p,gridArea:_,margin:ce,onOpen:Ke,onClose:Ae,onClick:Me,dropContent:u.createElement(kt,{clear:y,disabled:k,disabledKey:H,dropHeight:ie,emptySearchMessage:se,id:W,labelKey:l,multiple:ee,name:v,onChange:tt,onKeyDown:D,onMore:be,onSearch:w,options:q,allOptions:J,optionIndexesInValue:Q,replace:Se,searchPlaceholder:Y,search:P,setSearch:we,selected:x,usingKeyboard:o,value:s,valueKey:$},g),plainSelect:ue,plain:!0,dropProps:Ee,theme:L},u.createElement(N,{align:"center",direction:"row",justify:"between",background:L.select.background},u.createElement(N,{direction:"row",flex:!0,basis:"auto"},re||Ne?u.createElement(u.Fragment,null,re||Ne,u.createElement(ht,{type:"text",name:v,id:W?W+"__input":void 0,value:Ve,ref:R,readOnly:!0})):u.createElement(Dt,Le({a11yTitle:(r||n)&&""+(r||n)+(s&&typeof s=="string"?", "+s:""),disabled:k,id:W,name:v,ref:R,placeholder:U,value:Ve,size:Oe,theme:L},Pe))),Te&&u.createElement(N,{margin:L.select.icons.margin,flex:!1,style:{minWidth:"auto"}},i.isValidElement(Te)?Te:u.createElement(Te,{color:nt,size:Oe})))))});_e.displayName="Select";_e.propTypes=jt;export{_e as S};
