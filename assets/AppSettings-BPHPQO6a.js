import{g as Nt,s as vn,b as xn,a as bn,c as yn,o as Cn,d as In}from"./index-e3d5d3f4-BnpCz8AB.js";import{r as h,R as y,i as wn,u as jn,a as mt,j as o,L as Dt,c as Re,k as Sn}from"./index-B5q0XL7m.js";import{B as C,S as Le,W as Ft,X as We,O as ie,Y as Oe,Z as $t,b as X,a as ke,$ as be,a0 as kn,a1 as Xt,a2 as Gt,a3 as p,a4 as pt,a5 as He,a6 as P,a7 as Wt,a8 as gt,a9 as En,aa as jt,ab as Ht,ac as An,ad as Tn,ae as Mn,af as On,ag as _n,ah as Ln,ai as Pn,aj as Ut,N as Q,ak as Rn,al as Bn,am as zn,Q as se,F,an as Ue,ao as Nn,R as H,u as ye,G as Ye,I as le,C as et,_ as De,ap as St,T as _e,aq as Yt,ar as Dn,as as Ve,at as vt,au as Ke,av as Fn,aw as Vt,ax as xt,q as Fe,K as Pe,ay as $n,az as Xn,H as rt,g as Gn,r as Wn,k as Hn,m as Un,s as Yn,aA as Vn,aB as Kt,aC as kt,aD as Kn,aE as Jn,aF as Qn,aG as Zn,aH as qn,aI as er}from"./FirebaseUtils-DPMbTUBM.js";import{L as Je}from"./LongPressButton-BsvFwpmp.js";import{A as Jt}from"./Anchor-DTLE72rf.js";import{C as Te,a as Qt}from"./CheckBoxGroup-Cbq_q2Ee.js";import{S as tr}from"./cards-regular-lblrVrU_.js";import{S as nr}from"./RollTableCard-Ds6vctU6.js";import{R as rr}from"./RollAllTablesButton-D_dykPNe.js";var ar={},ir=ar,Zt=h.createContext({}),or=["activeIndex","animate","children","level","multiple","onActive"];function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},at.apply(null,arguments)}function sr(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var lr=function(t){return typeof t=="number"?[t]:t},qt=h.forwardRef(function(e,t){var n=e.activeIndex,r=e.animate,a=r===void 0?!0:r,i=e.children,s=e.level,l=e.multiple,u=e.onActive,d=sr(e,or),c=h.useState([]),f=c[0],m=c[1],g=h.useState(),I=g[0],v=g[1],w=lr(n)||[];(typeof n<"u"||n!==I)&&w.join()!==f.join()&&(m(w),v(n));var M=h.useCallback(function(b){var E=function(O){var D=[].concat(f||[]),x=D.indexOf(O);x>-1?D.splice(x,1):l?D.push(O):D=[O],m(D),u&&u(D)};return{active:f.indexOf(b)>-1,animate:a,level:s,onPanelChange:function(){return E(b)}}},[f,a,s,l,u]);return y.createElement(C,at({ref:t},d),h.Children.toArray(i).filter(function(b){return b}).map(function(b,E){return y.createElement(Zt.Provider,{key:E,value:M(E)},b)}))});qt.propTypes=ir;var cr={},ur=cr,dr=ie(C).withConfig({displayName:"Collapsible__AnimatedBox",componentId:"sc-15kniua-0"})(["",""],function(e){return e.shouldOpen?`visibility: hidden;
      position: absolute;
      pointer-events: none;`:"transition: "+("max-"+e.dimension+" "+e.speedProp+"ms, opacity "+e.speedProp+"ms")+`;
      opacity: `+(e.open?1:0)+`;
      overflow: `+(e.animate||!e.open?"hidden":"visible")+";"}),bt=h.forwardRef(function(e,t){var n=e.children,r=e.direction,a=e.open,i=Le(),s=h.useState(a),l=s[0],u=s[1],d=h.useState(!1),c=d[0],f=d[1],m=h.useState(i.collapsible.minSpeed),g=m[0],I=m[1],v=h.useMemo(function(){return r==="horizontal"?"width":"height"},[r]),w=Ft(t),M=h.useRef(0),b=!l&&a,E=l&&!a;return h.useEffect(function(){a!==l&&(f(!0),u(a))},[l,a]),We(function(){var _=w.current;if(!c&&b){var O=_.parentNode.style.position;_.parentNode.style.position="relative";var D=_.getBoundingClientRect(),x=D[v];_.parentNode.style.position=O,M.current=x}if(b)_.style["max-"+v]=0;else if(E){var G=_.getBoundingClientRect(),$=G[v];_.style["max-"+v]=$+"px"}},[b,E,w,v,c]),h.useEffect(function(){if(b||E){var _=w.current,O=i.collapsible,D=O.minSpeed,x=O.baseline,G=Math.max(M.current/x*D,D);I(G),requestAnimationFrame(function(){requestAnimationFrame(function(){_.style["max-"+v]=b?M.current+"px":0})})}},[b,E,w,v,i]),h.useEffect(function(){if(c){var _=w.current,O=setTimeout(function(){f(!1),_.removeAttribute("style")},g);return function(){return clearTimeout(O)}}},[c,w,g,l]),y.createElement(dr,{"aria-hidden":!l,ref:w,open:l,animate:c,dimension:v,speedProp:g,shouldOpen:!c&&b},b||l||c?n:null)});bt.displayName="Collapsible";bt.propTypes=ur;var fr={},hr=fr,mr=["children","header","label","onClick","onMouseOut","onMouseOver","onFocus","onBlur"];function it(){return it=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},it.apply(null,arguments)}function pr(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var we=h.forwardRef(function(e,t){var n=e.children,r=e.header,a=e.label,i=e.onClick,s=e.onMouseOut,l=e.onMouseOver,u=e.onFocus,d=e.onBlur,c=pr(e,mr),f=Le(),m=h.useContext(Zt),g=m.active,I=m.animate,v=m.level,w=m.onPanelChange,M=h.useState(void 0),b=M[0],E=M[1],_=h.useState(),O=_[0],D=_[1],x=h.useMemo(function(){return Oe(f.accordion.icons.color||"control",f)},[f]),G=h.useMemo(function(){return g?f.accordion.icons.collapse:f.accordion.icons.expand},[g,f.accordion.icons]),$=JSON.stringify({dark:"light-4",light:"dark-3"});JSON.stringify(f.accordion.hover.color)!==$&&console.warn(`The theme style for accordion.hover.color is deprecated,
        use accordion.hover.heading.color instead.`);var ne=f.accordion.hover&&JSON.stringify(f.accordion.hover.heading.color)!==$?f.accordion.hover.heading.color:f.accordion.hover.color,B=f.accordion.border,N=f.accordion.panel.border,re;return N&&(re={bottom:"-"+$t(f.global.borderSize[N.size]||N.size||f.global.borderSize.xsmall)+"px"}),y.createElement(C,{ref:t,flex:!1,onClick:i,border:N,margin:re},y.createElement(X,{"aria-expanded":g,plain:f.button.default?!0:void 0,onClick:w,hoverIndicator:f.accordion.hover.background,onMouseOver:function(Y){E(ne),l&&l(Y)},onMouseOut:function(Y){E(void 0),s&&s(Y)},onFocus:function(Y){E(ne),D(!0),u&&u(Y)},onBlur:function(Y){E(void 0),D(!1),d&&d(Y)},style:O?{zIndex:1}:void 0},r||y.createElement(C,it({align:"center",direction:"row",justify:"between"},c),typeof a=="string"?y.createElement(C,{pad:{horizontal:"xsmall"}},y.createElement(ke,{level:v||f.accordion.heading&&f.accordion.heading.level||4,margin:f.accordion.heading&&f.accordion.heading.margin||void 0,color:b},a)):a,G&&y.createElement(C,{pad:{horizontal:"small"},width:{min:"fit-content"}},y.createElement(G,{color:x})))),y.createElement(C,{role:"region",border:B},I?y.createElement(bt,{open:g},n):g&&n))});we.displayName="AccordionPanel";we.propTypes=hr;var en=p(["left:-100%;right:100%;z-index:-1;position:fixed;"]),gr=`
  position: fixed;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
`,vr=`
  position: fixed;
  width: 100%;
  height: 100%;
  min-height: 100vh;
`,xr=ie.div.withConfig(He).attrs(be).withConfig({displayName:"StyledLayer",componentId:"sc-rmtehz-0"})([""," background:transparent;position:relative;z-index:",";pointer-events:none;outline:none;"," ",";"],Xt,function(e){return e.theme.layer.zIndex},function(e){if(e.position==="hidden")return en;var t=[];if(t.push(gr),e.responsive&&e.theme.layer.responsiveBreakpoint&&!e.layerTarget){var n=e.theme.global.breakpoints[e.theme.layer.responsiveBreakpoint];t.push(pt(n,vr))}return t},function(e){return e.theme.layer&&e.theme.layer.extend}),br=ie.div.withConfig(He).attrs(be).withConfig({displayName:"StyledLayer__StyledOverlay",componentId:"sc-rmtehz-1"})(["position:absolute;"," top:0px;left:0px;right:0px;bottom:0px;"," "," pointer-events:all;will-change:transform;"],function(e){if(e.responsive&&e.theme.layer.responsiveBreakpoint){var t=e.theme.global.breakpoints[e.theme.layer.responsiveBreakpoint];return pt(t,"position: relative;")}return""},function(e){return e.theme.layer.overlay.backdropFilter&&"backdrop-filter: "+e.theme.layer.overlay.backdropFilter+";"},function(e){return!e.plain&&e.theme.layer.overlay.background&&Gt(e.theme.layer.overlay.background,e.theme)}),ve=function(t,n,r){var a=r.indexOf("top")!==-1||r.indexOf("bottom")!==-1?"vertical":"horizontal",i=t[r]||t[a]||t,s=n.global.edgeSize[i]||i,l=!!n.global.edgeSize[i];return!l&&typeof i!="string"?0:$t(s)},Ae=function(t,n,r,a){return a===void 0&&(a=void 0),a?t[a]+ve(n,r,a):{bottom:t.bottom+ve(n,r,"bottom"),end:t.right+ve(n,r,"end"),left:t.left+ve(n,r,"left"),right:t.right+ve(n,r,"right"),start:t.left+ve(n,r,"start"),top:t.top+ve(n,r,"top")}},yr={center:{vertical:P(["0%{transform:translateX(-50%) scale(0.8);}100%{transform:translateX(-50%) scale(1);}"]),horizontal:P(["0%{transform:translateY(-50%) scale(0.8);}100%{transform:translateY(-50) scale(1);}"]),true:P(["0%{transform:scale(0.8);}100%{transform:scale(1);}"]),false:P(["0%{transform:translate(-50%,-50%) scale(0.8);}100%{transform:translate(-50%,-50%) scale(1);}"])},top:{vertical:P(["0%{transform:translate(-50%,-100%);}100%{transform:translate(-50%,0);}"]),horizontal:P(["0%{transform:translateY(-100%);}100%{transform:translateY(0);}"]),true:P(["0%{transform:translateY(-100%);}100%{transform:translateY(0);}"]),false:P(["0%{transform:translate(-50%,-100%);}100%{transform:translate(-50%,0);}"])},bottom:{vertical:P(["0%{transform:translate(-50%,100%);}100%{transform:translate(-50%,0);}"]),horizontal:P(["0%{transform:translateY(100%);}100%{transform:translateY(0);}"]),true:P(["0%{transform:translateY(100%);}100%{transform:translateY(0);}"]),false:P(["0%{transform:translate(-50%,100%);}100%{transform:translate(-50%,0);}"])},left:{vertical:P(["0%{transform:translateX(-100%);}100%{transform:translateX(0);}"]),horizontal:P(["0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}"]),true:P(["0%{transform:translateX(-100%);}100%{transform:translateX(0);}"]),false:P(["0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}"])},right:{vertical:P(["0%{transform:translateX(100%);}100%{transform:translateX(0);}"]),horizontal:P(["0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}"]),true:P(["0%{transform:translateX(100%);}100%{transform:translateX(0);}"]),false:P(["0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}"])},start:{vertical:P(["0%{transform:translateX(-100%);}100%{transform:translateX(0);}"]),horizontal:P(["0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}"]),true:P(["0%{transform:translateX(-100%);}100%{transform:translateX(0);}"]),false:P(["0%{transform:translate(-100%,-50%);}100%{transform:translate(0,-50%);}"])},end:{vertical:P(["0%{transform:translateX(100%);}100%{transform:translateX(0);}"]),horizontal:P(["0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}"]),true:P(["0%{transform:translateX(100%);}100%{transform:translateX(0);}"]),false:P(["0%{transform:translate(100%,-50%);}100%{transform:translate(0,-50%);}"])}},tn=200,S=function(t,n,r){var a=t.animation!==void 0?t.animation:t.animate;a===void 0&&(a="slide");var i;return a==="slide"||a===!0?i=yr[n][r]:a==="fadeIn"&&(i=P(["0%{opacity:0}100%{opacity:1}"])),i?p(["animation:"," ","s ease-in-out forwards;"],i,tn/1e3):""},Cr={center:{vertical:function(t){return p(["top:","px;bottom:","px;left:50%;transform:translateX(-50%);",""],t.top,t.bottom,function(n){return S(n,"center","vertical")})},horizontal:function(t){return p(["left:","px;right:","px;top:50%;transform:translateY(-50%);",""],t.left,t.right,function(n){return S(n,"center","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"center","true")})},false:function(){return p(["top:50%;left:50%;transform:translate(-50%,-50%);",""],function(t){return S(t,"center","false")})}},top:{vertical:function(t){return p(["top:","px;bottom:","px;left:50%;transform:translate(-50%,0%);",""],t.top,t.bottom,function(n){return S(n,"top","vertical")})},horizontal:function(t){return p(["left:","px;right:","px;top:","px;transform:translateY(0);",""],t.left,t.right,t.top,function(n){return S(n,"top","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateY(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"top","true")})},false:function(t){return p(["top:","px;left:50%;transform:translate(-50%,0);",""],t.top,function(n){return S(n,"top","false")})}},bottom:{vertical:function(t){return p(["top:","px;bottom:","px;left:50%;transform:translate(-50%,0);",""],t.top,t.bottom,function(n){return S(n,"bottom","vertical")})},horizontal:function(t){return p(["left:","px;right:","px;bottom:","px;transform:translateY(0);",""],t.left,t.top,t.bottom,function(n){return S(n,"bottom","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateY(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"bottom","true")})},false:function(t){return p(["bottom:","px;left:50%;transform:translate(-50%,0);",""],t.bottom,function(n){return S(n,"bottom","false")})}},left:{vertical:function(t){return p(["top:","px;bottom:","px;left:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,function(n){return S(n,"left","vertical")})},horizontal:function(t){return p(["left:","px;right:","px;top:50%;transform:translate(0,-50%);",""],t.left,t.right,function(n){return S(n,"left","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"left","true")})},false:function(t){return p(["left:","px;top:50%;transform:translate(0,-50%);",""],t.left,function(n){return S(n,"left","false")})}},right:{vertical:function(t){return p(["top:","px;bottom:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.right,function(n){return S(n,"right","vertical")})},horizontal:function(t){return p(["left:","px;right:","px;top:50%;transform:translate(0,-50%);",""],t.left,t.right,function(n){return S(n,"right","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"right","true")})},false:function(t){return p(["right:","px;top:50%;transform:translate(0,-50%);",""],t.right,function(n){return S(n,"right","false")})}},start:{vertical:function(t){return p(["top:","px;bottom:","px;inset-inline-start:","px;transform:translateX(0);",""],t.top,t.bottom,t.start,function(n){return S(n,"start","vertical")})},horizontal:function(t){return p(["inset-inline-start:","px;inset-inline-end:","px;top:50%;transform:translate(0,-50%);",""],t.start,t.end,function(n){return S(n,"start","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;inset-inline-start:","px;inset-inline-end:","px;transform:translateX(0);",""],t.top,t.bottom,t.start,t.end,function(n){return S(n,"start","true")})},false:function(t){return p(["inset-inline-start:","px;top:50%;transform:translate(0,-50%);",""],t.start,function(n){return S(n,"start","false")})}},end:{vertical:function(t){return p(["top:","px;bottom:","px;inset-inline-end:","px;transform:translateX(0);",""],t.top,t.bottom,t.end,function(n){return S(n,"end","vertical")})},horizontal:function(t){return p(["inset-inline-start:","px;inset-inline-end:","px;top:50%;transform:translate(0,-50%);",""],t.start,t.end,function(n){return S(n,"end","horizontal")})},true:function(t){return p(["top:","px;bottom:","px;inset-inline-start:","px;inset-inline-end:","px;transform:translateX(0);",""],t.top,t.bottom,t.start,t.end,function(n){return S(n,"end","true")})},false:function(t){return p(["inset-inline-end:","px;top:50%;transform:translate(0,-50%);",""],t.end,function(n){return S(n,"end","false")})}},"top-right":{vertical:function(t){return p(["top:","px;bottom:","px;right:","px;transform:translateX(0);",";"],t.top,t.bottom,t.right,function(n){return S(n,"top","true")})},horizontal:function(t){return p(["left:","px;right:","px;top:0;transform:translateX(0);",";"],t.left,t.right,function(n){return S(n,"top","true")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",";"],t.top,t.bottom,t.left,t.right,function(n){return S(n,"top","true")})},false:function(t){return p(["top:","px;right:","px;transform:translateY(0);",";"],t.top,t.right,function(n){return S(n,"top","true")})}},"top-left":{vertical:function(t){return p(["top:","px;bottom:","px;left:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,function(n){return S(n,"top","true")})},horizontal:function(t){return p(["left:","px;right:","px;top:0;transform:translateX(0);",""],t.left,t.right,function(n){return S(n,"top","true")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"top","true")})},false:function(t){return p(["top:","px;left:","px;transform:translateY(0);",""],t.top,t.left,function(n){return S(n,"top","true")})}},"bottom-right":{vertical:function(t){return p(["top:","px;bottom:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.right,function(n){return S(n,"bottom","true")})},horizontal:function(t){return p(["left:","px;right:","px;bottom:","px;transform:translateY(0);",""],t.left,t.right,t.bottom,function(n){return S(n,"bottom","true")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"bottom","true")})},false:function(t){return p(["bottom:","px;right:","px;transform:translateY(0);",""],t.bottom,t.right,function(n){return S(n,"bottom","true")})}},"bottom-left":{vertical:function(t){return p(["top:","px;bottom:","px;left:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,function(n){return S(n,"bottom","true")})},horizontal:function(t){return p(["left:","px;right:","px;bottom:","px;transform:translateY(0);",""],t.left,t.right,t.bottom,function(n){return S(n,"bottom","true")})},true:function(t){return p(["top:","px;bottom:","px;left:","px;right:","px;transform:translateX(0);",""],t.top,t.bottom,t.left,t.right,function(n){return S(n,"bottom","true")})},false:function(t){return p(["bottom:","px;left:","px;transform:translateY(0);",""],t.bottom,t.left,function(n){return S(n,"bottom","true")})}}},Ir=function(t,n,r,a){var i=[],s=t===!0?"medium":t,l=n.global.edgeSize[s]||s,u=l.split(" ").length>1;return a==="none"&&!u&&n.layer.border.intelligentRounding===!0?r==="bottom"?i.push(p(["border-radius:"," "," 0 0;"],l,l)):r==="bottom-left"?i.push(p(["border-radius:0 "," 0 0;"],l)):r==="bottom-right"?i.push(p(["border-radius:"," 0 0 0;"],l)):r==="end"?i.push(p(["border-start-start-radius:",";border-end-start-radius:",";"],l,l)):r==="left"?i.push(p(["border-radius:0 "," "," 0;"],l,l)):r==="right"?i.push(p(["border-radius:"," 0 0 ",";"],l,l)):r==="start"?i.push(p(["border-end-end-radius:",";border-start-end-radius:",";"],l,l)):r==="top"?i.push(p(["border-radius:0 0 "," ",";"],l,l)):r==="top-left"?i.push(p(["border-radius:0 0 "," 0;"],l)):r==="top-right"?i.push(p(["border-radius:0 0 0 ",";"],l)):i.push(p(["border-radius:",";"],l)):i.push(p(["border-radius:",";"],l)),i},Ce={left:0,right:0,top:0,bottom:0},wr=p([""," max-height:",";max-width:",";",";",";"],function(e){return!e.modal&&e.position==="hidden"?en:p(["position:",";"],e.modal||e.layerTarget?"absolute":"fixed")},function(e){return"calc(100% - "+Ae(Ce,e.margin,e.theme,"top")+"px - "+Ae(Ce,e.margin,e.theme,"bottom")+"px)"},function(e){return"calc(100% - "+Ae(Ce,e.margin,e.theme,"left")+"px - "+Ae(Ce,e.margin,e.theme,"right")+"px)"},function(e){return e.plain||e.full&&e.margin==="none"?"border-radius: 0;":Ir(e.theme.layer.border.radius,e.theme,e.position,e.margin)},function(e){return e.position!=="hidden"&&Cr[e.position][e.full](Ae(Ce,e.margin,e.theme),Ce)||""}),jr=function(t){return p(["position:relative;max-height:none;max-width:none;border-radius:0;height:",";width:",";"],t.layerTarget?"100%":"100vh",t.layerTarget?"100%":"100vw")},Sr=p(["box-shadow:",";"],function(e){return e.theme.global.elevation[e.theme.dark?"dark":"light"][e.theme.layer.container.elevation]}),kr=ie.div.attrs(be).withConfig({shouldForwardProp:function(t){return kn(t)&&!["elevation"].includes(t)}}).withConfig({displayName:"StyledLayer__StyledContainer",componentId:"sc-rmtehz-2"})([""," display:flex;flex-direction:column;min-height:",";"," outline:none;pointer-events:all;z-index:",";"," "," ",";",";"],function(e){return e.modal?"":Xt},function(e){return e.theme.global.size.xxsmall},function(e){return!e.plain&&(e.background||e.theme.layer.background)&&Gt(e.background||e.theme.layer.background,e.theme)},function(e){return e.theme.layer.container.zIndex},function(e){return!e.plain&&e.theme.layer.container.elevation&&Sr},wr,function(e){if(e.responsive&&e.theme.layer.responsiveBreakpoint){var t=e.theme.global.breakpoints[e.theme.layer.responsiveBreakpoint];if(t)return pt(t,jr)}return""},function(e){return e.theme.layer.container&&e.theme.layer.container.extend}),Er=["background","children","full","id","margin","modal","onClickOutside","onEsc","plain","position","responsive","target"];function $e(){return $e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(null,arguments)}function Ar(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Tr=ie.a.withConfig(He).withConfig({displayName:"LayerContainer__HiddenAnchor",componentId:"sc-1srj14c-0"})(["width:0;height:0;overflow:hidden;position:absolute;&:focus{outline:none;}"]),Mr=h.forwardRef(function(e,t){var n=e.background,r=e.children,a=e.full,i=a===void 0?!1:a,s=e.id,l=e.margin,u=l===void 0?"none":l,d=e.modal,c=d===void 0?!0:d,f=e.onClickOutside,m=e.onEsc,g=e.plain,I=e.position,v=I===void 0?"center":I,w=e.responsive,M=w===void 0?!0:w,b=e.target,E=Ar(e,Er),_=h.useContext(Wt),O=Le(),D=h.useContext(gt),x=h.useContext(En),G=x.layer,$=h.useRef(),ne=h.useRef(),B=h.useRef(),N=h.useContext(jt),re=h.useMemo(function(){return N.length},[N]),W=h.useMemo(function(){return[].concat(N,[re])},[N,re]),Y=Ht();h.useEffect(function(){var R=new Date,q=B.current,V=v==="hidden";return V||Y({type:"layerOpen",element:q}),function(){V||Y({type:"layerClose",element:q,elapsed:new Date().getTime()-R.getTime()})}},[Y,B,v]),h.useEffect(function(){if(v!=="hidden"){var R=B.current||ne.current||t.current;R&&R.scrollIntoView&&R.scrollIntoView();for(var q=document.activeElement;q&&q!==ne.current;)q=q.parentElement;c&&!q&&$.current&&$.current.focus()}},[c,v,t]),h.useEffect(function(){if(v!=="hidden"){var R=B.current||ne.current||t.current;R&&R.scrollIntoView&&R.scrollIntoView()}},[v,t]),h.useEffect(function(){var R=function(te){for(var U=null,ae=te.composed&&te.composedPath()[0]||te.target;U===null&&ae&&ae!==document&&!(ae instanceof ShadowRoot);){var k=ae.getAttribute("data-g-portal-id");k!==null&&k!==""?U=parseInt(k,10):ae=ae.parentNode}(U===null||N.indexOf(U)!==-1)&&ae!==null&&f(te)};if(f&&document.addEventListener("mousedown",R),b){var q=function(){var te=window.innerWidth,U=window.innerHeight,ae=_n(b),k=B.current;if(k&&ae){k.style.left="",k.style.top="",k.style.bottom="",k.style.width="";var ee=ae.getBoundingClientRect(),he=k.getBoundingClientRect();k.style.left=ee.left+"px",k.style.right=te-ee.right+"px",k.style.top=ee.top+"px",k.style.bottom=U-ee.bottom+"px",k.style.maxHeight=ee.height,k.style.maxWidth=Math.min(he.width,te)}};return q(),window.addEventListener("resize",q),window.addEventListener("scroll",q,!0),function(){window.removeEventListener("resize",q),window.removeEventListener("scroll",q,!0),f&&document.removeEventListener("mousedown",R)}}return function(){f&&document.removeEventListener("mousedown",R)}},[_,b,f,N,re]);var Z=y.createElement(kr,$e({ref:t||ne,background:n,elevation:O.layer.container.elevation,id:G&&G.singleId?s+"__container":s,full:i,margin:u,modal:c},E,{position:v,plain:g,responsive:M,layerTarget:b,dir:O.dir,"data-g-portal-id":re}),y.createElement(Tr,{ref:$,tabIndex:"-1","aria-hidden":"true"}),r);Z=y.createElement(xr,{ref:B,id:s,plain:g,position:v,responsive:M,layerTarget:b,tabIndex:"-1",dir:O.dir},c&&y.createElement(br,{plain:g,responsive:M,onMouseDown:f}),Z),m&&(Z=y.createElement(An,{onEsc:m?function(R){R.stopPropagation(),m(R)}:void 0,target:c===!1?"document":void 0},Z));var z=h.useMemo(function(){var R=Tn(O.layer.background,O);return $e({},O,{dark:R})},[O]);if(O.layer.background){var ge=z.dark;ge!==void 0&&ge!==O.dark&&(Z=y.createElement(Mn.Provider,{value:z},Z))}Z=y.createElement(jt.Provider,{value:W},Z);var ue=M&&D===O.layer.responsiveBreakpoint;return(c||ue)&&(Z=y.createElement(On,{hidden:v==="hidden",restrictScroll:!b&&(c||ue)?!0:void 0,trapFocus:!0},Z)),Z}),Or={},_r=Or;function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(null,arguments)}var Qe=h.forwardRef(function(e,t){var n=e.animate,r=e.animation,a=e.targetChildPosition,i=h.useState(),s=i[0],l=i[1];h.useEffect(function(){return l(document.activeElement)},[]);var u=h.useState(),d=u[0],c=u[1],f=h.useContext(Wt);return h.useEffect(function(){return c(Ln(f,a))},[f,a]),We(function(){return function(){if(s&&(s.focus?setTimeout(function(){return s.focus()},0):s.parentNode&&s.parentNode.focus&&s.parentNode.focus()),d){var m=r!==void 0?r:n;if(m!==!1){var g=d.cloneNode(!0);g.id="layerClone",f.appendChild(g);var I=g.querySelector('[class*="StyledLayer__StyledContainer"]');I&&I.style&&(I.style.animationDirection="reverse"),setTimeout(function(){var v=f.getRootNode().getElementById("layerClone");v&&(f.contains(v)&&f.removeChild(v),d.remove())},tn)}else f.contains(d)&&f.removeChild(d)}}},[n,r,f,d,s]),d?Pn.createPortal(y.createElement(Mr,ot({ref:t},e)),d):null});Qe.displayName="Layer";Qe.propTypes=_r;var nn=y.createContext({}),Lr=p(["&:hover{"," "," ",";}&:focus{z-index:1;}"],function(e){return e.theme.tab.hover.background&&p(["background:",";"],Oe(e.theme.tab.hover.background,e.theme))},function(e){return e.theme.tab.hover.color&&p(["color:",";"],Oe(e.theme.tab.hover.color,e.theme))},function(e){return e.theme.tab.hover.extend}),Pr=ie(C).attrs(be).withConfig({displayName:"StyledTab",componentId:"sc-1nnwnsb-0"})(["white-space:nowrap;"," "," "," ",""],Ut,function(e){return!e.plain&&!e.disabled&&e.theme.tab.hover&&Lr},function(e){return e.disabled&&e.theme.tab.disabled},function(e){return e.theme.tab.extend}),Rr={},Br=Rr,zr=["active","disabled","children","icon","plain","title","onBlur","onFocus","onMouseOver","onMouseOut","reverse","onClick"];function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(null,arguments)}function Nr(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var Se=h.forwardRef(function(e,t){e.active;var n=e.disabled,r=e.children,a=e.icon,i=e.plain,s=e.title,l=e.onBlur,u=e.onFocus,d=e.onMouseOver,c=e.onMouseOut,f=e.reverse,m=e.onClick,g=Nr(e,zr),I=h.useContext(nn),v=I.active,w=I.activeIndex,M=I.index,b=I.ref,E=I.onActivate,_=I.setActiveContent,O=I.setActiveTitle,D=I.setFocusIndex,x=Le(),G=h.useState(void 0),$=G[0],ne=G[1],B=s,N={},re=Ft(t);We(function(){re.current&&b&&(b.current=re.current)}),h.useEffect(function(){if(v){_(r);var te=typeof s=="string"?s:w+1;O(te)}},[v,w,r,_,O,s]);var W=function(U){ne(!0),d&&d(U)},Y=function(U){ne(void 0),c&&c(U)};i||(typeof s!="string"?B=s:v?B=y.createElement(Q,x.tab.active,s):n&&x.tab.disabled?B=y.createElement(Q,x.tab.disabled,s):B=y.createElement(Q,{color:$?x.tab.hover.color:x.tab.color},s));var Z=function(U){U&&U.preventDefault(),E(),m&&m(U)};if(v&&n&&console.warn("Warning: Tab props 'active' and 'disabled' have both been set to TRUE on the same Tab resulting in an interesting Tab state. Is this your intent?"),!i){if(typeof s!="string"?B=s:v?B=y.createElement(Q,x.tab.active,s):n&&x.tab.disabled?B=y.createElement(Q,x.tab.disabled,s):B=y.createElement(Q,{color:$?x.tab.hover.color:x.tab.color},s),x.tab.border){var z=x.tab.border.color||x.global.control.border.color;v?z=x.tab.border.active.color||z:n&&x.tab.border.disabled?z=x.tab.border.disabled.color||z:$&&(z=x.tab.border.hover.color||z),z=Oe(z,x),N.border={side:x.tab.border.side,size:x.tab.border.size,color:z}}N.background=v&&x.tab.active.background||x.tab.background,N.pad=x.tab.pad,N.margin=x.tab.margin}var ge=function(U){return v?y.cloneElement(U,je({},x.tab.active)):n?y.cloneElement(U,je({},x.tab.disabled)):y.cloneElement(U,{color:$?x.tab.hover.color:x.tab.color})},ue;a&&(ue=ge(a));var R=f?B:ue,q=f?ue:B,V;return R&&q&&(V={direction:"row",align:"center",justify:"center",gap:"small"}),y.createElement(X,je({ref:re,plain:!0,role:"tab","aria-selected":v,"aria-expanded":v,disabled:n},g,{onClick:Z,onMouseOver:W,onMouseOut:Y,onFocus:function(){u&&u(),D(M)},onBlur:function(){l&&l(),D(-1)}}),y.createElement(Pr,je({disabled:n,plain:i},V,N),R,q))});Se.displayName="Tab";Se.propTypes=Br;var Ie,Dr=ie(C).attrs(be).withConfig({displayName:"StyledTabs__StyledTabsHeader",componentId:"sc-a4fwxl-0"})(["",";"],function(e){return e.theme.tabs.header.extend}),Fr=(Ie={},Ie[!0]="1 1",Ie[!1]="0 0",Ie.grow="1 0",Ie.shrink="0 1",Ie),$r=p(["flex:",";"],function(e){return""+Fr[e.flex]+(e.flex!==!0?" auto":"")}),Xr=ie.div.withConfig(He).attrs(be).withConfig({displayName:"StyledTabs__StyledTabPanel",componentId:"sc-a4fwxl-1"})(["min-height:0;"," ",";"],function(e){return e.flex&&$r},function(e){return e.theme.tabs.panel.extend}),Gr=ie(C).attrs(be).withConfig({displayName:"StyledTabs",componentId:"sc-a4fwxl-2"})([""," ",";"],Ut,function(e){return e.theme.tabs.extend}),Wr={},Hr=Wr,Ur=["alignControls","children","flex","justify","messages","responsive"];function Xe(){return Xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xe.apply(null,arguments)}function Yr(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var yt=h.forwardRef(function(e,t){var n,r=e.alignControls,a=e.children,i=e.flex,s=e.justify,l=s===void 0?"center":s,u=e.messages,d=e.responsive,c=d===void 0?!0:d,f=Yr(e,Ur),m=Le(),g=h.useContext(Rn),I=g.format,v=f.activeIndex,w=f.onActive,M=h.useState(f.activeIndex||0),b=M[0],E=M[1],_=h.useState(),O=_[0],D=_[1],x=h.useState(),G=x[0],$=x[1],ne=h.useState(),B=ne[0],N=ne[1],re=h.useState(),W=re[0],Y=re[1],Z=h.useState(),z=Z[0],ge=Z[1],ue=h.useState(-1),R=ue[0],q=ue[1],V=h.useRef(),te=h.useContext(gt),U=Ht();b!==v&&v!==void 0&&E(v);var ae=typeof window<"u"?/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent):!0;delete f.activeIndex,delete f.onActive;var k=h.useMemo(function(){return y.Children.map(a,function(){return y.createRef()})},[a]),ee=h.useCallback(function(T){if(k[T].current){var K,L=k[T].current.getBoundingClientRect(),A=(K=V.current)==null?void 0:K.getBoundingClientRect();if(L&&A)return L.left>=A.left-1&&L.right<=A.right+1}},[V,k]),he=h.useCallback(function(){N(ee(0)),Y(ee(k.length-1))},[k,ee]),me=h.useCallback(function(T,K){var L=k[T].current.getBoundingClientRect(),A=V.current.getBoundingClientRect(),J=0;if(L.left>=A.left&&L.left<=A.right?J=L.width-(A.right-L.left):L.right>=A.left&&L.right<=A.right?(J=L.width-(L.right-A.left),J=0-J):L.left>=A.right?J=L.right-A.right:L.right<=A.left&&(J=A.left-L.left,J=0-J),K&&(J<0&&(J-=2),J>0&&(J+=2)),ae?V.current.scrollBy({left:J}):V.current.scrollBy({left:J,behavior:"smooth"}),ae)he();else{var de=setInterval(function(){k[T].current&&ee(T)&&(he(),clearInterval(de))},50);setTimeout(function(){he(),clearInterval(de)},1e3)}},[k,V,ee,he,ae]),It=function(K){for(var L=K==="previous",A=K==="previous"?0:k.length-1,J,de=m.tabs.step[te]-1||0;J===void 0&&(L&&A<k.length-1||!L&&A>0);)!ee(A)&&(L&&ee(A+1)||!L&&ee(A-1))&&(L?A-de>=0?(me(A-de,!1),J=A-de):(me(0,!1),J=0):A+de<k.length?(me(A+de,!1),J=A+de):(me(k.length-1,!1),J=k.length-1)),A=L?A+1:A-1};h.useEffect(function(){var T;z&&k&&(T=k[b])!=null&&T.current&&!ee(b)&&me(b,!0)},[z,b,k,ee,me]),h.useEffect(function(){if(z&&R!==-1&&!ee(R))me(R,!0);else if(z&&R!==-1){var T=k[R].current.getBoundingClientRect(),K=V.current.getBoundingClientRect(),L=0;T.left>=K.left&&T.right<=K.right&&T.right+2>=K.right?L=2:T.right<=K.right&&T.left>=K.left&&T.left-2<=K.left&&(L=-2),V.current.scrollBy({left:L})}},[z,k,R,ee,me]),We(function(){var T=function(){V.current.scrollWidth>V.current.offsetWidth?ge(!0):ge(!1),he()};return T(),window.addEventListener("resize",T),function(){return window.removeEventListener("resize",T)}},[k,B,W,b,V,z,he]);var mn=h.useCallback(function(T){var K=function(A){U({type:"activateTab",element:k[A].current}),v===void 0&&E(A),w&&w(A)};return{activeIndex:b,active:b===T,index:T,ref:k[T],onActivate:function(){return K(T)},setActiveContent:D,setActiveTitle:$,setFocusIndex:q}},[b,w,v,U,k]),pn=y.Children.map(a,function(T,K){return y.createElement(nn.Provider,{value:mn(K)},T&&y.cloneElement(T,{active:b===K}))}),wt={};if(m.tabs.header&&m.tabs.header.border){var qe=m.tabs.header.border.color||m.global.control.border.color;qe=Oe(qe,m),wt.border={side:m.tabs.header.border.side,size:m.tabs.header.border.size,style:m.tabs.header.border.style,color:qe}}var gn=(G||"")+" "+I({id:"tabs.tabContents",messages:u});return y.createElement(Gr,Xe({ref:t,flex:i,responsive:c},f,{background:m.tabs.background}),y.createElement(C,Xe({alignSelf:r||((n=m.tabs.header)==null?void 0:n.alignSelf),role:"tablist",flex:!1,direction:z?"row":"column"},wt),z&&y.createElement(X,{a11yTitle:"Previous Tab",disabled:B,tabIndex:-1,onClick:function(){return It("previous")}},y.createElement(C,{pad:{vertical:"xsmall",horizontal:"small"}},y.createElement(Bn.Previous,{color:B?m.button.disabled.color:m.global.colors.text}))),y.createElement(Dr,{ref:V,direction:"row",justify:z?"start":l,flex:!!z,wrap:!1,overflow:z?"hidden":"visible",background:m.tabs.header.background,gap:m.tabs.gap,pad:z?"2px":void 0,margin:z?"-2px":void 0},pn),z&&y.createElement(X,{a11yTitle:"Next Tab",disabled:W,tabIndex:-1,onClick:function(){return It("next")}},y.createElement(C,{pad:{vertical:"xsmall",horizontal:"small"}},y.createElement(zn.Next,{color:W?m.button.disabled.color:m.global.colors.text})))),y.createElement(Xr,{flex:i,"aria-label":gn,role:"tabpanel"},O))});yt.displayName="Tabs";yt.propTypes=Hr;function yi(e){const t=wn(),n=jn(),r=h.useRef(null);h.useEffect(()=>{(async()=>{try{const i=Nt(mt);await vn(i,xn);const l=new URLSearchParams(t.search).get("authToken");if(l){await bn(i,l);const u=i.currentUser&&await yn(i.currentUser,!0);e(se.SetUserClaims({hasStorage:!!(u!=null&&u.claims.hasStorage),hasEpic:!!(u!=null&&u.claims.hasEpic)})),t.search="",n.replace(t)}else return Cn(i,()=>{!r.current&&!i.currentUser?(console.log("No user, signing in anonymously"),In(i),e(se.LogOut())):i.currentUser&&(console.log("User ID",i.currentUser.uid),r.current=i.currentUser)})}catch(i){console.warn(i)}})()},[t,n,e])}function fe(e){return Array.isArray?Array.isArray(e):on(e)==="[object Array]"}function Vr(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Kr(e){return e==null?"":Vr(e)}function ce(e){return typeof e=="string"}function rn(e){return typeof e=="number"}function Jr(e){return e===!0||e===!1||Qr(e)&&on(e)=="[object Boolean]"}function an(e){return typeof e=="object"}function Qr(e){return an(e)&&e!==null}function oe(e){return e!=null}function tt(e){return!e.trim().length}function on(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Zr="Incorrect 'index' type",qr=e=>`Invalid value for key ${e}`,ea=e=>`Pattern length exceeds max of ${e}.`,ta=e=>`Missing ${e} property in key`,na=e=>`Property 'weight' in key '${e}' must be a positive integer`,Et=Object.prototype.hasOwnProperty;class ra{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let a=sn(r);n+=a.weight,this._keys.push(a),this._keyMap[a.id]=a,n+=a.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function sn(e){let t=null,n=null,r=null,a=1,i=null;if(ce(e)||fe(e))r=e,t=At(e),n=st(e);else{if(!Et.call(e,"name"))throw new Error(ta("name"));const s=e.name;if(r=s,Et.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(na(s));t=At(s),n=st(s),i=e.getFn}return{path:t,id:n,weight:a,src:r,getFn:i}}function At(e){return fe(e)?e:e.split(".")}function st(e){return fe(e)?e.join("."):e}function aa(e,t){let n=[],r=!1;const a=(i,s,l)=>{if(oe(i))if(!s[l])n.push(i);else{let u=s[l];const d=i[u];if(!oe(d))return;if(l===s.length-1&&(ce(d)||rn(d)||Jr(d)))n.push(Kr(d));else if(fe(d)){r=!0;for(let c=0,f=d.length;c<f;c+=1)a(d[c],s,l+1)}else s.length&&a(d,s,l+1)}};return a(e,ce(t)?t.split("."):t,0),r?n:n[0]}const ia={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},oa={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},sa={location:0,threshold:.6,distance:100},la={useExtendedSearch:!1,getFn:aa,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var j={...oa,...ia,...sa,...la};const ca=/[^ ]+/g;function ua(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(a){const i=a.match(ca).length;if(n.has(i))return n.get(i);const s=1/Math.pow(i,.5*e),l=parseFloat(Math.round(s*r)/r);return n.set(i,l),l},clear(){n.clear()}}}class Ct{constructor({getFn:t=j.getFn,fieldNormWeight:n=j.fieldNormWeight}={}){this.norm=ua(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ce(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();ce(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!oe(t)||tt(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((a,i)=>{let s=a.getFn?a.getFn(t):this.getFn(t,a.path);if(oe(s)){if(fe(s)){let l=[];const u=[{nestedArrIndex:-1,value:s}];for(;u.length;){const{nestedArrIndex:d,value:c}=u.pop();if(oe(c))if(ce(c)&&!tt(c)){let f={v:c,i:d,n:this.norm.get(c)};l.push(f)}else fe(c)&&c.forEach((f,m)=>{u.push({nestedArrIndex:m,value:f})})}r.$[i]=l}else if(ce(s)&&!tt(s)){let l={v:s,n:this.norm.get(s)};r.$[i]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function ln(e,t,{getFn:n=j.getFn,fieldNormWeight:r=j.fieldNormWeight}={}){const a=new Ct({getFn:n,fieldNormWeight:r});return a.setKeys(e.map(sn)),a.setSources(t),a.create(),a}function da(e,{getFn:t=j.getFn,fieldNormWeight:n=j.fieldNormWeight}={}){const{keys:r,records:a}=e,i=new Ct({getFn:t,fieldNormWeight:n});return i.setKeys(r),i.setIndexRecords(a),i}function Be(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:a=j.distance,ignoreLocation:i=j.ignoreLocation}={}){const s=t/e.length;if(i)return s;const l=Math.abs(r-n);return a?s+l/a:l?1:s}function fa(e=[],t=j.minMatchCharLength){let n=[],r=-1,a=-1,i=0;for(let s=e.length;i<s;i+=1){let l=e[i];l&&r===-1?r=i:!l&&r!==-1&&(a=i-1,a-r+1>=t&&n.push([r,a]),r=-1)}return e[i-1]&&i-r>=t&&n.push([r,i-1]),n}const xe=32;function ha(e,t,n,{location:r=j.location,distance:a=j.distance,threshold:i=j.threshold,findAllMatches:s=j.findAllMatches,minMatchCharLength:l=j.minMatchCharLength,includeMatches:u=j.includeMatches,ignoreLocation:d=j.ignoreLocation}={}){if(t.length>xe)throw new Error(ea(xe));const c=t.length,f=e.length,m=Math.max(0,Math.min(r,f));let g=i,I=m;const v=l>1||u,w=v?Array(f):[];let M;for(;(M=e.indexOf(t,I))>-1;){let x=Be(t,{currentLocation:M,expectedLocation:m,distance:a,ignoreLocation:d});if(g=Math.min(x,g),I=M+c,v){let G=0;for(;G<c;)w[M+G]=1,G+=1}}I=-1;let b=[],E=1,_=c+f;const O=1<<c-1;for(let x=0;x<c;x+=1){let G=0,$=_;for(;G<$;)Be(t,{errors:x,currentLocation:m+$,expectedLocation:m,distance:a,ignoreLocation:d})<=g?G=$:_=$,$=Math.floor((_-G)/2+G);_=$;let ne=Math.max(1,m-$+1),B=s?f:Math.min(m+$,f)+c,N=Array(B+2);N[B+1]=(1<<x)-1;for(let W=B;W>=ne;W-=1){let Y=W-1,Z=n[e.charAt(Y)];if(v&&(w[Y]=+!!Z),N[W]=(N[W+1]<<1|1)&Z,x&&(N[W]|=(b[W+1]|b[W])<<1|1|b[W+1]),N[W]&O&&(E=Be(t,{errors:x,currentLocation:Y,expectedLocation:m,distance:a,ignoreLocation:d}),E<=g)){if(g=E,I=Y,I<=m)break;ne=Math.max(1,2*m-I)}}if(Be(t,{errors:x+1,currentLocation:m,expectedLocation:m,distance:a,ignoreLocation:d})>g)break;b=N}const D={isMatch:I>=0,score:Math.max(.001,E)};if(v){const x=fa(w,l);x.length?u&&(D.indices=x):D.isMatch=!1}return D}function ma(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const a=e.charAt(n);t[a]=(t[a]||0)|1<<r-n-1}return t}class cn{constructor(t,{location:n=j.location,threshold:r=j.threshold,distance:a=j.distance,includeMatches:i=j.includeMatches,findAllMatches:s=j.findAllMatches,minMatchCharLength:l=j.minMatchCharLength,isCaseSensitive:u=j.isCaseSensitive,ignoreLocation:d=j.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:d},this.pattern=u?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(m,g)=>{this.chunks.push({pattern:m,alphabet:ma(m),startIndex:g})},f=this.pattern.length;if(f>xe){let m=0;const g=f%xe,I=f-g;for(;m<I;)c(this.pattern.substr(m,xe),m),m+=xe;if(g){const v=f-xe;c(this.pattern.substr(v),v)}}else c(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let I={isMatch:!0,score:0};return r&&(I.indices=[[0,t.length-1]]),I}const{location:a,distance:i,threshold:s,findAllMatches:l,minMatchCharLength:u,ignoreLocation:d}=this.options;let c=[],f=0,m=!1;this.chunks.forEach(({pattern:I,alphabet:v,startIndex:w})=>{const{isMatch:M,score:b,indices:E}=ha(t,I,v,{location:a+w,distance:i,threshold:s,findAllMatches:l,minMatchCharLength:u,includeMatches:r,ignoreLocation:d});M&&(m=!0),f+=b,M&&E&&(c=[...c,...E])});let g={isMatch:m,score:m?f/this.chunks.length:1};return m&&r&&(g.indices=c),g}}class pe{constructor(t){this.pattern=t}static isMultiMatch(t){return Tt(t,this.multiRegex)}static isSingleMatch(t){return Tt(t,this.singleRegex)}search(){}}function Tt(e,t){const n=e.match(t);return n?n[1]:null}class pa extends pe{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class ga extends pe{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class va extends pe{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class xa extends pe{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ba extends pe{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class ya extends pe{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class un extends pe{constructor(t,{location:n=j.location,threshold:r=j.threshold,distance:a=j.distance,includeMatches:i=j.includeMatches,findAllMatches:s=j.findAllMatches,minMatchCharLength:l=j.minMatchCharLength,isCaseSensitive:u=j.isCaseSensitive,ignoreLocation:d=j.ignoreLocation}={}){super(t),this._bitapSearch=new cn(t,{location:n,threshold:r,distance:a,includeMatches:i,findAllMatches:s,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class dn extends pe{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const a=[],i=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+i,a.push([r,n-1]);const s=!!a.length;return{isMatch:s,score:s?0:1,indices:a}}}const lt=[pa,dn,va,xa,ya,ba,ga,un],Mt=lt.length,Ca=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Ia="|";function wa(e,t={}){return e.split(Ia).map(n=>{let r=n.trim().split(Ca).filter(i=>i&&!!i.trim()),a=[];for(let i=0,s=r.length;i<s;i+=1){const l=r[i];let u=!1,d=-1;for(;!u&&++d<Mt;){const c=lt[d];let f=c.isMultiMatch(l);f&&(a.push(new c(f,t)),u=!0)}if(!u)for(d=-1;++d<Mt;){const c=lt[d];let f=c.isSingleMatch(l);if(f){a.push(new c(f,t));break}}}return a})}const ja=new Set([un.type,dn.type]);class Sa{constructor(t,{isCaseSensitive:n=j.isCaseSensitive,includeMatches:r=j.includeMatches,minMatchCharLength:a=j.minMatchCharLength,ignoreLocation:i=j.ignoreLocation,findAllMatches:s=j.findAllMatches,location:l=j.location,threshold:u=j.threshold,distance:d=j.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:a,findAllMatches:s,ignoreLocation:i,location:l,threshold:u,distance:d},this.pattern=n?t:t.toLowerCase(),this.query=wa(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:a}=this.options;t=a?t:t.toLowerCase();let i=0,s=[],l=0;for(let u=0,d=n.length;u<d;u+=1){const c=n[u];s.length=0,i=0;for(let f=0,m=c.length;f<m;f+=1){const g=c[f],{isMatch:I,indices:v,score:w}=g.search(t);if(I){if(i+=1,l+=w,r){const M=g.constructor.type;ja.has(M)?s=[...s,...v]:s.push(v)}}else{l=0,i=0,s.length=0;break}}if(i){let f={isMatch:!0,score:l/i};return r&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const ct=[];function ka(...e){ct.push(...e)}function ut(e,t){for(let n=0,r=ct.length;n<r;n+=1){let a=ct[n];if(a.condition(e,t))return new a(e,t)}return new cn(e,t)}const Ge={AND:"$and",OR:"$or"},dt={PATH:"$path",PATTERN:"$val"},ft=e=>!!(e[Ge.AND]||e[Ge.OR]),Ea=e=>!!e[dt.PATH],Aa=e=>!fe(e)&&an(e)&&!ft(e),Ot=e=>({[Ge.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function fn(e,t,{auto:n=!0}={}){const r=a=>{let i=Object.keys(a);const s=Ea(a);if(!s&&i.length>1&&!ft(a))return r(Ot(a));if(Aa(a)){const u=s?a[dt.PATH]:i[0],d=s?a[dt.PATTERN]:a[u];if(!ce(d))throw new Error(qr(u));const c={keyId:st(u),pattern:d};return n&&(c.searcher=ut(d,t)),c}let l={children:[],operator:i[0]};return i.forEach(u=>{const d=a[u];fe(d)&&d.forEach(c=>{l.children.push(r(c))})}),l};return ft(e)||(e=Ot(e)),r(e)}function Ta(e,{ignoreFieldNorm:t=j.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:a,norm:i,score:s})=>{const l=a?a.weight:null;r*=Math.pow(s===0&&l?Number.EPSILON:s,(l||1)*(t?1:i))}),n.score=r})}function Ma(e,t){const n=e.matches;t.matches=[],oe(n)&&n.forEach(r=>{if(!oe(r.indices)||!r.indices.length)return;const{indices:a,value:i}=r;let s={indices:a,value:i};r.key&&(s.key=r.key.src),r.idx>-1&&(s.refIndex=r.idx),t.matches.push(s)})}function Oa(e,t){t.score=e.score}function _a(e,t,{includeMatches:n=j.includeMatches,includeScore:r=j.includeScore}={}){const a=[];return n&&a.push(Ma),r&&a.push(Oa),e.map(i=>{const{idx:s}=i,l={item:t[s],refIndex:s};return a.length&&a.forEach(u=>{u(i,l)}),l})}class Ee{constructor(t,n={},r){this.options={...j,...n},this.options.useExtendedSearch,this._keyStore=new ra(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof Ct))throw new Error(Zr);this._myIndex=n||ln(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){oe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,a=this._docs.length;r<a;r+=1){const i=this._docs[r];t(i,r)&&(this.removeAt(r),r-=1,a-=1,n.push(i))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:a,shouldSort:i,sortFn:s,ignoreFieldNorm:l}=this.options;let u=ce(t)?ce(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return Ta(u,{ignoreFieldNorm:l}),i&&u.sort(s),rn(n)&&n>-1&&(u=u.slice(0,n)),_a(u,this._docs,{includeMatches:r,includeScore:a})}_searchStringList(t){const n=ut(t,this.options),{records:r}=this._myIndex,a=[];return r.forEach(({v:i,i:s,n:l})=>{if(!oe(i))return;const{isMatch:u,score:d,indices:c}=n.searchIn(i);u&&a.push({item:i,idx:s,matches:[{score:d,value:i,norm:l,indices:c}]})}),a}_searchLogical(t){const n=fn(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:f,searcher:m}=l,g=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(u,f),searcher:m});return g&&g.length?[{idx:d,item:u,matches:g}]:[]}const c=[];for(let f=0,m=l.children.length;f<m;f+=1){const g=l.children[f],I=r(g,u,d);if(I.length)c.push(...I);else if(l.operator===Ge.AND)return[]}return c},a=this._myIndex.records,i={},s=[];return a.forEach(({$:l,i:u})=>{if(oe(l)){let d=r(n,l,u);d.length&&(i[u]||(i[u]={idx:u,item:l,matches:[]},s.push(i[u])),d.forEach(({matches:c})=>{i[u].matches.push(...c)}))}}),s}_searchObjectList(t){const n=ut(t,this.options),{keys:r,records:a}=this._myIndex,i=[];return a.forEach(({$:s,i:l})=>{if(!oe(s))return;let u=[];r.forEach((d,c)=>{u.push(...this._findMatches({key:d,value:s[c],searcher:n}))}),u.length&&i.push({idx:l,item:s,matches:u})}),i}_findMatches({key:t,value:n,searcher:r}){if(!oe(n))return[];let a=[];if(fe(n))n.forEach(({v:i,i:s,n:l})=>{if(!oe(i))return;const{isMatch:u,score:d,indices:c}=r.searchIn(i);u&&a.push({score:d,key:t,value:i,idx:s,norm:l,indices:c})});else{const{v:i,n:s}=n,{isMatch:l,score:u,indices:d}=r.searchIn(i);l&&a.push({score:u,key:t,value:i,norm:s,indices:d})}return a}}Ee.version="6.6.2";Ee.createIndex=ln;Ee.parseIndex=da;Ee.config=j;Ee.parseQuery=fn;ka(Sa);function hn(){return o.jsxs("span",{className:"fa-layers fa-fw",children:[o.jsx(F,{icon:Ue}),o.jsx(F,{icon:Nn,transform:{size:12,x:-12,y:-8,rotate:24}})]})}function Me(e){var g,I;const{state:t,dispatch:n}=h.useContext(H),r=ye(),a=((I=(g=Ye(t,r))==null?void 0:g.openCardIds)==null?void 0:I.includes(e.card.cardId))||!1,i=t.activeCampaignId&&!e.card.campaignId&&e.card.type!=="info",s=h.useCallback(()=>r&&n(le.OpenCard({dashboardId:r,cardId:e.card.cardId,cardType:e.card.type})),[n,r,e.card.cardId,e.card.type]),l=h.useCallback(()=>{if(!r)return console.error("No dashboard open");n(le.CloseCard({cardId:e.card.cardId,dashboardId:r}))},[n,r,e.card.cardId]),u=h.useCallback(()=>{n(et.DeleteCard({cardId:e.card.cardId}))},[n,e.card.cardId]),[d,c]=h.useState(!1),f=h.useRef(null),m=()=>{var v;n(et.SetCardPath({cardId:e.card.cardId,path:((v=f.current)==null?void 0:v.value)||""})),c(!1)};if(d){const v=De.uniq(Object.values(t.cardsById).map(w=>w.path)).filter(w=>w&&w.length>0).sort().map(w=>({label:w,value:w}));return o.jsxs(C,{flex:!1,direction:"row",align:"center",children:[o.jsx(C,{margin:"small",children:o.jsx(F,{icon:St})}),o.jsx(_e,{ref:f,defaultValue:e.card.path,onKeyDown:w=>{w.key==="Enter"&&m()},autoFocus:!0,suggestions:v,onSuggestionSelect:w=>{f.current&&(f.current.value=w.suggestion.value,m())}}),o.jsx(X,{tip:"Move to Folder",onClick:()=>c(!1),icon:o.jsx(F,{icon:Yt})})]})}return o.jsxs(C,{flex:!1,direction:"row",background:{color:a?"brand-2":"transparent"},children:[o.jsx(C,{onClick:s,flex:!0,justify:"center",margin:"xsmall",style:{overflowX:"hidden"},children:e.card.title}),i&&o.jsx(X,{style:{padding:"6px"},tip:"Move to Active Campaign",onClick:()=>n(et.SetCardCampaign({cardId:e.card.cardId,campaignId:t.activeCampaignId})),icon:o.jsx(hn,{})}),e.showFolder&&o.jsx(X,{style:{padding:"6px"},tip:"Move to Folder",onClick:()=>c(!0),icon:o.jsx(F,{icon:St})}),a&&o.jsx(X,{style:{padding:"6px"},tip:"Close Card",onClick:l,icon:o.jsx(F,{icon:Dn})}),e.card.type!=="info"&&o.jsx(Je,{tip:"Delete",onLongPress:u,icon:o.jsx(F,{icon:Ve})})]})}const ze={gap:"xsmall"},_t=[{Name:"Card Type",GetGroupsForCard:e=>[vt[e.type]],GetSection:e=>o.jsx(we,{label:e.groupName,children:o.jsx(C,{...ze,children:e.cards.map(t=>o.jsx(Me,{card:t},t.cardId))})})},{Name:"Dashboard",GetGroupsForCard:(e,t)=>Object.keys(t.dashboardsById).filter(r=>{var a,i;return(i=(a=t.dashboardsById[r])==null?void 0:a.openCardIds)==null?void 0:i.includes(e.cardId)}),GetSection:e=>{var n;const{state:t}=h.useContext(H);return o.jsx(we,{label:(n=t.dashboardsById[e.groupName])==null?void 0:n.name,children:o.jsx(C,{...ze,children:e.cards.map(r=>o.jsx(Me,{card:r},e.groupName+"_"+r.cardId))})})}},{Name:"Folder",GetGroupsForCard:e=>[e.path??""],GetSection:e=>e.groupName===""?o.jsx(we,{label:"(no folder)",children:o.jsx(C,{...ze,children:e.cards.map(t=>o.jsx(Me,{showFolder:!0,card:t},t.cardId))})}):o.jsx(we,{label:e.groupName,children:o.jsx(C,{...ze,children:e.cards.map(t=>o.jsx(Me,{showFolder:!0,card:t},t.cardId))})})}];function Lt(){const{state:e}=h.useContext(H);if(e.activeCampaignId){const t=e.campaignsById[e.activeCampaignId];if(t)return o.jsxs(Q,{children:[o.jsx(Ke,{content:"Cards shown for Active Campaign",children:o.jsx(X,{icon:o.jsx(F,{icon:Ue})})}),t.title]})}return null}function La(){const{state:e}=h.useContext(H),[t,n]=h.useState(0),[r,a]=h.useState(""),i=Pa(e),s=h.useMemo(()=>new Ee(i,{keys:[{name:"title",weight:1},{name:"content",weight:.5}],ignoreLocation:!0}),[i]),l={pad:"xsmall",gap:"small",overflow:{vertical:"auto"}};if(r.length>0){const c=s.search(r);return o.jsxs(C,{...l,children:[o.jsx(Lt,{}),o.jsx(_e,{placeholder:"Search...",value:r,onChange:f=>a(f.target.value)}),c.map(f=>{const m=f.item;return o.jsx(Me,{card:m},m.cardId)})]})}const u=_t[t];if(!u)return null;const d=Ra(i,u,e);return o.jsxs(C,{...l,children:[o.jsx(Lt,{}),o.jsx(_e,{placeholder:"Search...",value:r,onChange:c=>a(c.target.value)}),o.jsx(Ke,{content:"Change Sorting",dropProps:{stretch:!1,align:{bottom:"top",right:"right"}},children:o.jsxs(C,{flex:!1,direction:"row",align:"center",justify:"between",pad:{horizontal:"xsmall"},border:{side:"bottom"},onClick:()=>{const c=(t+1)%_t.length;n(c)},children:[o.jsxs(ke,{level:4,style:{fontStyle:"italic"},children:["Sorted by ",u.Name]}),o.jsx(F,{icon:Fn})]})}),o.jsx(qt,{children:d},u.Name)]})}function Pa(e){return Object.keys(e.cardsById).map(t=>{const n=e.cardsById[t];if(n)return{...n,cardId:t}}).filter(Vt).filter(t=>!e.activeCampaignId||!t.campaignId||!e.campaignsById[t.campaignId]?!0:t.campaignId===e.activeCampaignId)}function Ra(e,t,n){const r=Object.values(e).filter(Vt).reduce((i,s)=>{const l=t.GetGroupsForCard(s,n);for(const u of l)i[u]||(i[u]=[]),i[u].push(s);return i},{});return Object.keys(r).sort((i,s)=>i===""?1:s===""?-1:i.localeCompare(s)).map(i=>{const s=r[i];return s?y.createElement(t.GetSection,{groupName:i,cards:s,key:i}):null})}function Ba(e){const{state:t,dispatch:n}=h.useContext(H),a=ye()===e.dashboardId,i=t.activeCampaignId&&!e.dashboard.campaignId,s=h.useCallback(()=>{n(le.DeleteDashboard({dashboardId:e.dashboardId}))},[n,e.dashboardId]);return o.jsxs(C,{flex:!1,direction:"row",background:{color:a?"brand-2":"transparent"},children:[o.jsx(C,{flex:!0,justify:"center",margin:"xsmall",style:{overflowX:"hidden"},children:o.jsx(Dt,{to:`/e/${e.dashboardId}`,component:Jt,style:{fontWeight:"normal"},children:e.dashboard.name})}),i&&o.jsx(X,{style:{padding:"6px"},tip:"Move to Active Campaign",onClick:()=>n(le.SetDashboardCampaign({dashboardId:e.dashboardId,campaignId:t.activeCampaignId})),icon:o.jsx(hn,{})}),o.jsx(Je,{tip:"Delete Dashboard",onLongPress:s,icon:o.jsx(F,{icon:Ve})})]})}function za(){const{state:e,dispatch:t}=h.useContext(H),n=De.toPairs(e.dashboardsById),r=De.sortBy(n,([,a])=>-(a.lastOpenedTimeMs??0)).filter(([,a])=>!e.activeCampaignId||!a.campaignId||!e.campaignsById[a.campaignId]?!0:a.campaignId===e.activeCampaignId);return o.jsxs(C,{pad:"xsmall",overflow:{vertical:"auto"},children:[o.jsx(Na,{}),r.map(([a,i])=>o.jsx(Ba,{dashboardId:a,dashboard:i},a)),o.jsx(X,{onClick:()=>t(le.CreateDashboard({dashboardId:Fe()})),fill:"horizontal",label:"New Dashboard",icon:o.jsx(F,{icon:xt})})]})}function Na(){var t;const{state:e}=h.useContext(H);return e.activeCampaignId?o.jsxs(Q,{children:[o.jsx(Ke,{content:"Dashboards shown for Active Campaign",children:o.jsx(X,{icon:o.jsx(F,{icon:Ue})})}),(t=e.campaignsById[e.activeCampaignId])==null?void 0:t.title]}):null}function ht(){const{librarySidebarMode:e,setLibrarySidebarMode:t}=h.useContext(Pe),{state:n}=h.useContext(H),r=h.useCallback(()=>{t(e==="cards"?"hidden":"cards")},[e,t]),a=h.useCallback(()=>{t(e==="dashboards"?"hidden":"dashboards")},[e,t]),i=h.useCallback(()=>{t(e==="campaigns"?"hidden":"campaigns")},[e,t]);return o.jsxs(C,{direction:"row",gap:"small",children:[o.jsx(X,{tip:"Cards",icon:o.jsx(tr,{title:"Cards",height:"22px"}),onClick:r}),o.jsx(X,{tip:"Dashboards",icon:o.jsx(nr,{title:"Dashboards",height:"22px"}),onClick:a}),o.jsx(X,{tip:"Campaigns",icon:o.jsx(F,{icon:Ue}),onClick:i})]})}const Da={};function Fa(){const{state:e,dispatch:t}=h.useContext(H),n=Da;if(!(n.VITE_PATREON_CLIENT_ID&&n.VITE_PATREON_LOGIN_REDIRECT_URI&&n.VITE_ENABLE_ACCOUNT_SYNC))return null;if(e.user.isLoggedIn)return o.jsxs(C,{direction:"row",pad:"small",align:"center",justify:"center",children:[o.jsx(Q,{style:{fontStyle:"italic"},children:"Logged in with Patreon"}),o.jsx(X,{tip:"Log out",icon:o.jsx(F,{icon:$n,onClick:async()=>{await Nt(mt).signOut(),t(se.LogOut())}})})]});const r=new URL("https://www.patreon.com/oauth2/authorize");return r.searchParams.append("response_type","code"),r.searchParams.append("client_id",n.VITE_PATREON_CLIENT_ID),r.searchParams.append("redirect_uri",n.VITE_PATREON_LOGIN_REDIRECT_URI),r.searchParams.append("state",JSON.stringify({finalRedirect:window.location.href})),o.jsx(X,{margin:"small",alignSelf:"center",label:"Login with Patreon",href:r.href})}function $a(e){const{state:t,dispatch:n}=h.useContext(H),r=h.useRef(null),a=h.useCallback(()=>{var l;const s=(l=r.current)==null?void 0:l.value;s&&n(se.RenameCampaign({campaignId:e.campaignId,title:s})),e.onComplete()},[n,e]),i=t.campaignsById[e.campaignId];return o.jsxs(C,{flex:!1,direction:"row",children:[o.jsx(_e,{defaultValue:i==null?void 0:i.title,ref:r,onKeyDown:s=>{s.key==="Enter"&&a()},autoFocus:!0,onFocus:s=>s.target.select()}),o.jsx(X,{onClick:a,icon:o.jsx(F,{icon:Yt})})]})}function Xa(e){const{state:t,dispatch:n}=h.useContext(H),[r,a]=h.useState(!1),s=t.activeCampaignId===e.campaignId,l=h.useCallback(()=>{e.campaignId&&n(se.DeleteCampaign({campaignId:e.campaignId}))},[n,e.campaignId]);return r&&e.campaignId?o.jsx($a,{campaignId:e.campaignId,onComplete:()=>a(!1)}):o.jsxs(C,{flex:!1,direction:"row",background:{color:s?"brand-2":"transparent"},children:[o.jsx(C,{fill:"horizontal",justify:"center",margin:"xsmall",style:{overflowX:"hidden"},children:o.jsx(Dt,{to:`/c/${e.campaignId}`,component:Jt,style:{fontWeight:"normal"},children:e.campaignTitle})}),o.jsx(X,{tip:"Rename Campaign",onClick:()=>a(!0),icon:o.jsx(F,{icon:Xn})}),o.jsx(Je,{tip:"Delete Campaign",onLongPress:l,icon:o.jsx(F,{icon:Ve})})]})}function Ga(){const{state:e,dispatch:t}=h.useContext(H),r=e.activeCampaignId===void 0,a=h.useCallback(()=>{t(se.SetCampaignActive({campaignId:void 0}))},[t]);return o.jsx(C,{flex:!1,direction:"row",background:{color:r?"brand-2":"transparent"},children:o.jsx(C,{fill:"horizontal",justify:"center",margin:"xsmall",style:{overflowX:"hidden"},children:o.jsx(X,{onClick:a,fill:"horizontal",margin:"xsmall",style:{overflowX:"hidden"},children:"(default campaign)"})})})}function Wa(){const{state:e,dispatch:t}=h.useContext(H),n=Object.values(e.campaignsById),r=De.sortBy(n,a=>a.title);return e.user.isLoggedIn?e.user.hasEpic?o.jsxs(C,{pad:"xsmall",overflow:{vertical:"auto"},children:[o.jsx(Ga,{}),r.map(a=>o.jsx(Xa,{campaignId:a.id,campaignTitle:a.title},a.id)),o.jsx(X,{onClick:()=>t(se.CreateCampaign({campaignId:Fe(),title:"New Campaign"})),fill:"horizontal",label:"New Campaign",icon:o.jsx(F,{icon:xt})})]}):o.jsx(C,{pad:"medium",children:o.jsxs(Q,{children:["Users who are pledged at the ",o.jsx(Pt,{})," can organize their Cards and Dashboards into separate Campaigns."]})}):o.jsx(C,{pad:"medium",children:o.jsxs(Q,{children:["Logged in users who are pledged at the ",o.jsx(Pt,{})," can organize their Cards and Dashboards into separate Campaigns."]})})}function Pt(){return o.jsx("a",{href:"https://www.patreon.com/improvedinitiative/membership",target:"_blank",rel:"noreferrer",children:"Epic Tier"})}function Ci(){const{librarySidebarMode:e,setLibrarySidebarMode:t}=h.useContext(Pe),n=h.useCallback(()=>{t("hidden")},[t]);return o.jsx(Qe,{onClickOutside:n,onEsc:n,position:"left",full:"vertical",children:o.jsxs(C,{background:"background",style:{width:"300px",minHeight:"100%"},alignContent:"center",children:[o.jsxs(rt,{background:"brand",pad:"small",height:"xsmall",children:[o.jsx(ht,{}),o.jsxs(ke,{level:3,margin:"none",children:[e==="cards"&&"Cards",e==="dashboards"&&"Dashboards",e==="campaigns"&&"Campaigns"]})]}),o.jsxs(C,{fill:!0,children:[e==="cards"&&o.jsx(La,{}),e==="dashboards"&&o.jsx(za,{}),e==="campaigns"&&o.jsx(Wa,{})]}),o.jsx(C,{alignSelf:"stretch",children:o.jsx(Fa,{})})]})})}async function Ha(e,t){const n=Ye(e,t);if(n===void 0)return!1;const r=Gn(mt),a=Wn(r,`shared/${t}`),i=Hn.removeUndefinedNodesFromTree({...e,cardsById:Un.pickBy(e.cardsById,s=>{var l;return(l=n.openCardIds)==null?void 0:l.includes(s.cardId)})});return await Yn(a,i),!0}function Ua(e){const{state:t,dispatch:n}=h.useContext(H),{setAppSettingsVisible:r}=h.useContext(Pe),a=ye(),i=a&&t.dashboardsById[a],[s,l]=h.useState(!1),u=h.useCallback(c=>a&&n(le.SetLayoutCompaction({dashboardId:a,layoutCompaction:c})),[n,a]),d=h.useCallback(c=>a&&n(le.SetLayoutPushCards({dashboardId:a,layoutPushCards:c})),[n,a]);return s&&i?o.jsx(Vn,{headerText:"Move Dashboard to Campaign",close:()=>l(!1),activeCampaignId:i.campaignId,selectCampaign:c=>n(le.SetDashboardCampaign({dashboardId:a,campaignId:c}))}):o.jsx(Kt,{dropAlign:{right:"right",top:"bottom"},icon:o.jsx(F,{icon:Jn}),items:[[{label:"Dashboard Menu",justify:"center",style:{fontStyle:"italic",cursor:"default"},hoverIndicator:!1}],[e.dashboard.layoutCompaction==="free"?{label:o.jsx(Te,{label:"Auto-Compact Cards"}),onClick:()=>u("compact")}:{label:o.jsx(Te,{label:"Auto-Compact Cards",checked:!0}),onClick:()=>u("free")},e.dashboard.layoutPushCards==="preventcollision"?{label:o.jsx(Te,{label:"Push Cards"}),onClick:()=>d("none")}:{label:o.jsx(Te,{label:"Push Cards",checked:!0}),onClick:()=>d("preventcollision")},{label:"Change Campaign...",onClick:()=>l(!0),disabled:!i,style:{display:t.user.hasEpic?"unset":"none"}},{label:o.jsxs(Q,{children:[o.jsx(nt,{icon:kt}),"Player View: "+a]}),onClick:()=>window.open(`/p/${a}`,"_blank")},{label:o.jsxs(Q,{children:[o.jsx(nt,{icon:kt}),"Share Dashboard"]}),onClick:async()=>{a&&await Ha(t,a)&&window.open(`/d/${a}`,"_blank")}}],[{label:o.jsxs(Q,{children:[o.jsx(nt,{icon:Kn}),"App Settings"]}),onClick:()=>{r(!0)}}]]})}const nt=ie(F).attrs({fixedWidth:!0})`
  padding: 0 5px 1px;
`;function Ya(e){const[t,n]=h.useState(!1),[r,a]=h.useState(e.text),i=()=>{e.trySubmit(r)&&n(!1)};return t?o.jsx(_e,{defaultValue:e.text,onChange:s=>a(s.target.value),onKeyDown:s=>{s.key==="Enter"&&i()},autoFocus:!0,onBlur:i}):o.jsx("span",{style:{whiteSpace:"nowrap"},onDoubleClick:()=>n(!0),children:e.text})}function Va(){const{state:e,dispatch:t}=h.useContext(H),n=ye(),a=e.appSettings.cardTypesInMenu.filter(l=>l==="info"?!1:l==="pdf"?e.user.hasStorage:!0).map(l=>({label:vt[l],onClick:()=>{const u=Fe();n&&t(le.AddCard({dashboardId:n,cardId:u,cardType:l}))}})),i=Object.values(e.appSettings.templateIdsInMenu).map(l=>{const u=e.templatesById[l];return u?{label:u.title,onClick:()=>{const d=Fe();n&&t(le.AddCardFromTemplate({dashboardId:n,cardId:d,templateId:u.cardId,cardType:u.type}))}}:(console.error(`Template ${l} not found`),{})}),s=i.length?[a,i]:a;return o.jsx(Kt,{dropAlign:{right:"right",top:"bottom"},icon:o.jsx(F,{icon:xt}),label:"New Card",items:s})}const Ii=()=>{const{state:e}=h.useContext(H),t=h.useContext(gt),n=ye(),r=Ye(e,n),a=t==="small"||t==="xsmall",i={background:"brand",pad:"small",direction:"column",gap:"none",fill:"horizontal",align:"stretch"};if(r==null)return o.jsxs(rt,{...i,children:[o.jsx(ht,{}),o.jsx(C,{fill:"horizontal",direction:"row",justify:"center",children:o.jsx(ke,{level:1,size:"small",margin:"xxsmall",children:"Paragon Campaign Dashboard"})})]});let s="Paragon Campaign Dashboard";if(r.campaignId){const l=e.campaignsById[r.campaignId];l&&(s=l.title)}return o.jsxs(rt,{...i,children:[o.jsxs(C,{direction:"row",justify:"between",children:[o.jsx(ht,{}),!a&&o.jsx(Rt,{subheader:s}),o.jsxs(C,{direction:"row",gap:"small",children:[o.jsx(Va,{}),o.jsx(rr,{}),o.jsx(Ua,{dashboard:r})]})]}),a&&o.jsx(Rt,{subheader:s})]})};function Rt({subheader:e}){return o.jsxs(C,{flex:!0,overflow:"hidden",fill:"horizontal",direction:"column",justify:"center",align:"center",children:[o.jsx(ke,{level:1,size:"small",margin:"none",children:o.jsx(Ja,{})}),o.jsxs(ke,{level:2,size:"small",margin:"none",style:{whiteSpace:"nowrap"},children:[e,o.jsx(Ka,{})]})]})}function Ka(){const{state:e}=h.useContext(H),t=ye();if(!t||!e.activeCampaignId)return null;const n=e.dashboardsById[t];if(!n||!n.campaignId||n.campaignId===e.activeCampaignId)return null;const r=e.campaignsById[e.activeCampaignId];return r?o.jsx(Ke,{content:`Your active Campaign is ${r.title}.`,children:o.jsx(X,{margin:{left:"small"},children:o.jsx(F,{icon:Qn})})}):null}function Ja(){var a;const{state:e,dispatch:t}=h.useContext(H),n=ye(),r=((a=Ye(e,n))==null?void 0:a.name)||"";return o.jsx(Ya,{text:r,trySubmit:i=>n&&i.length>0?(t(le.RenameActiveDashboard({dashboardId:n,newName:i})),!0):!1})}var Ne={exports:{}},Qa=Ne.exports,Bt;function Za(){return Bt||(Bt=1,function(e,t){(function(n,r){r()})(Qa,function(){function n(d,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,c,f){var m=new XMLHttpRequest;m.open("GET",d),m.responseType="blob",m.onload=function(){u(m.response,c,f)},m.onerror=function(){console.error("could not download file")},m.send()}function a(d){var c=new XMLHttpRequest;c.open("HEAD",d,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(c)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Re=="object"&&Re.global===Re?Re:void 0,l=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),u=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(d,c,f){var m=s.URL||s.webkitURL,g=document.createElement("a");c=c||d.name||"download",g.download=c,g.rel="noopener",typeof d=="string"?(g.href=d,g.origin===location.origin?i(g):a(g.href)?r(d,c,f):i(g,g.target="_blank")):(g.href=m.createObjectURL(d),setTimeout(function(){m.revokeObjectURL(g.href)},4e4),setTimeout(function(){i(g)},0))}:"msSaveOrOpenBlob"in navigator?function(d,c,f){if(c=c||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,f),c);else if(a(d))r(d,c,f);else{var m=document.createElement("a");m.href=d,m.target="_blank",setTimeout(function(){i(m)})}}:function(d,c,f,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof d=="string")return r(d,c,f);var g=d.type==="application/octet-stream",I=/constructor/i.test(s.HTMLElement)||s.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||g&&I||l)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var E=w.result;E=v?E:E.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=E:location=E,m=null},w.readAsDataURL(d)}else{var M=s.URL||s.webkitURL,b=M.createObjectURL(d);m?m.location=b:location.href=b,m=null,setTimeout(function(){M.revokeObjectURL(b)},4e4)}});s.saveAs=u.saveAs=u,e.exports=u})}(Ne)),Ne.exports}var qa=Za();const ei=Sn(qa);function ti(){const{state:e,dispatch:t}=h.useContext(H),n=h.useContext(Pe),r=h.useRef(null),[a,i]=h.useState(),s=()=>n.setAppSettingsVisible(!1);return o.jsxs(C,{flex:!1,pad:"small",gap:"small",children:[o.jsx(Q,{children:"Cards, Dashboards, and Campaigns"}),o.jsx(X,{icon:o.jsx(F,{icon:Zn}),label:"Export to .JSON",onClick:()=>ni(e)}),o.jsx(X,{icon:o.jsx(F,{icon:qn}),label:"Import from .JSON",onClick:()=>{var l;return(l=r.current)==null?void 0:l.click()}}),o.jsx("input",{ref:r,type:"file",onChange:async l=>{var d;const u=(d=l.target.files)==null?void 0:d[0];if(u){const c=await u.text();try{const f=ri(c,e,t);f&&(alert(`Imported data: ${f.cardsCount} cards, ${f.dashboardsCount} dashboards`),s())}catch(f){i(f.message)}}},style:{display:"none"}}),a&&o.jsxs(ai,{children:["Error importing from file: ",a]})]})}function ni(e){const t={dashboardsById:e.dashboardsById,cardsById:e.cardsById,campaignsById:e.campaignsById},n=JSON.stringify(t,null,"	"),r=new Blob([n]),a=new Date().toISOString();ei(r,`paragon-dashboard-data_${a}.json`)}function ri(e,t,n){const r=JSON.parse(e),a=Object.keys((r==null?void 0:r.cardsById)??{}),i=Object.keys((r==null?void 0:r.dashboardsById)??{});if(a.length+i.length===0)throw new Error("Did not find any cards or dashboards in the file.");const s=Object.keys(t.cardsById).filter(u=>a.includes(u)),l=Object.keys(t.dashboardsById).filter(u=>i.includes(u));return(s.length>0||l.length>0)&&!window.confirm(`This will overwrite ${s.length} cards and ${l.length} dashboards. Continue?`)?!1:(n(se.ImportCardsAndDashboards({cardsById:r.cardsById,dashboardsById:r.dashboardsById,campaignsById:r.campaignsById})),{cardsCount:Object.keys(r.cardsById).length,dashboardsCount:Object.keys(r.dashboardsById).length,campaignsCount:Object.keys(r.campaignsById).length})}const ai=ie(Q)`
  font-style: italic;
`;function wi(){const e=h.useContext(Pe),t=()=>e.setAppSettingsVisible(!1);return o.jsx(Qe,{onClickOutside:t,onEsc:t,position:"center",children:o.jsx(C,{background:"background",pad:"small",style:{width:"500px",height:"600px"},alignContent:"center",elevation:"medium",overflow:{vertical:"auto"},children:o.jsxs(yt,{children:[o.jsx(Se,{title:"General",children:o.jsx(ii,{})}),o.jsx(Se,{title:"Card Types",children:o.jsx(si,{})}),o.jsx(Se,{title:"Templates",children:o.jsx(ci,{})}),o.jsx(Se,{title:"My Data",children:o.jsx(oi,{})})]})})})}function ii(){const{state:e,dispatch:t}=h.useContext(H);return o.jsx(Ze,{children:o.jsxs(C,{pad:"small",children:[o.jsx(Te,{label:"Collapse card margins",checked:e.appSettings.collapseMargins,onChange:n=>{t(se.SetSettings({settingsPartial:{collapseMargins:n.target.checked}}))}}),o.jsx(li,{})]})})}function oi(){return o.jsx(Ze,{children:o.jsx(ti,{})})}function si(){const{state:e,dispatch:t}=h.useContext(H),n=er.filter(r=>r==="info"?!1:r==="pdf"?e.user.hasStorage:!0).map(r=>({label:vt[r],value:r}));return o.jsxs(Ze,{children:[o.jsx(Q,{margin:"xsmall",children:"Show in New Card menu:"}),o.jsx(Qt,{margin:"xsmall",flex:!1,options:n,value:e.appSettings.cardTypesInMenu,onChange:r=>{const a=r==null?void 0:r.value;t(se.SetSettings({settingsPartial:{cardTypesInMenu:a}}))}})]})}function li(){return o.jsxs(ui,{children:["Paragon Campaign Dashboard is funded on ",o.jsx(zt,{href:"https://www.patreon.com/improvedinitiative",children:"Patreon"})," and developed on ",o.jsx(zt,{href:"https://github.com/cynicaloptimist/paragon/",children:"Github"}),"."]})}function ci(){const{state:e,dispatch:t}=h.useContext(H),n=Object.values(e.templatesById);if(n.length===0)return o.jsx(Q,{children:"You can create a template from an existing Card from the Card Menu."});{const r=n.map(a=>({label:o.jsxs(C,{direction:"row",align:"center",children:[a.title," ",o.jsx(Je,{tip:"Delete",shortHeight:!0,onLongPress:()=>{t(se.DeleteTemplate({templateId:a.cardId}))},icon:o.jsx(F,{icon:Ve})})]}),value:a.cardId}));return o.jsxs(Ze,{children:[o.jsx(Q,{margin:"xsmall",children:"Templates in New Card menu:"}),o.jsx(Qt,{margin:"xsmall",flex:!1,options:r,value:e.appSettings.templateIdsInMenu,onChange:a=>{const i=a==null?void 0:a.value;t(se.SetSettings({settingsPartial:{templateIdsInMenu:i}}))}})]})}}const zt=ie.a.attrs({target:"_blank",rel:"noreferrer"})``,ui=ie(Q).attrs({color:"text-fade"})`
  font-size: medium;
  flex-shrink: 0;
`,Ze=ie(C)`
  width: 350px;
  margin: auto;
`;export{wi as A,za as D,Ci as L,Ii as T,yi as u};
